# Development Essentials

## Course Introduction
- Well rounded software engineers are Capable, Creative, Collaborative, and Christlike

## AWS Account
- Create AWS account. We will use this for EC2 (Server), EC2 Elastic IP (Keep IP address between reboots), Route 53 (Domain name & DNS records)

## Git
- Git is the world's most popular version control system, created by Linus Torvalds
- git -- version in the terminal will show you what version of git is installed on your machine
- Git allows you to 1. track versions of files in a directory and 2. allows you to clone all of those versions to a different location

- Initializing a git directory in terminal:
    - mkdir gitdirectory
    - cd playingWithGit
    - git init
- Listing all files in terminal from new git directory
    - ls -la
- Create a new file in git directory using terminal and check status to see what git is doing
    - echo hello world > hello.txt
    - git status
- Usually you add Git to all files in a directory. You do this in terminal. This will stage the file(s) to be committed to the Git repository
    - git add .
    - git status
- You then can commit the file changes into the directory in the terminal. You do this and we leave a meaningful comment about the commit using the -m parameter
    - git commit -m "meaningful message"
    - git status (this will show you that the working tree is clean, there are no commits to be made)
- You can commit multiple files at once. You only will commit the ones that you've staged. You don't have to stage all files with changes in a commit. You can automatically stage and modify all files with changes using -a in the terminal.
    - echo goodbye world > hello.txt
    - git commit -am "changed greeting to reflect mood"
- You can view the versions of the files in the Git repository with git log. THis will display commits and comments.
    - git log
- Every commmit has a unique idewtifier that is generated by hashing the file along with the timestamp using the SHA algorithm. You can always refer to a specific commit in your version history using its SHA. Do this in terminal with the checkout command. this will take you back to a previous version of the file
    - git checkout d43b07b8890f(example SHA)
- You can easily go back to the most recent version using checkout master in the terminal
    - git checkout master
- You can use diff and HEAD to compare differences between committs. HEAD by default is the commit you're currently looking at. You can use HEAD~ and the numerical distance from the HEAD that you want to look at.
    - git diff HEAD HEAD~1
- Git supports the ability to branch your code. This allows you to work on variations of the code while still allowing progress on the main branch. For example, if you wanted to work on a new feature named A without interrupting work on the master branch, you would use the git branch A command to create a new branch named A, then start working on the new branch with the git checkout A command. Now commits can be done to either the master branch or the A branch. When you want to combine the work done on both branches, you checkout the master branch and execute git merge A. If you decide you want to abandon the new feature, then you just don't ever merge it back into the master branch.
- Be aware that if you store large binary files (images or videos), you will make a copy each time you commit and could use significant storage doing so. 

## GitHub
- GitHub is a cloud based service taht makes the management of cloning repositories much easier
- We will use GitHub for 1. Hosting instruction, 2. Publilcly hosing our project repositories, 3. Keeping notes
- You can create a repository in your development environment using git init and then connect it upstream to a repsoitory on GitHub, but it's a lot easier to create your repository first on GitHub and then clone it to your dev environment. This automatically links them together
- You clone a repository by providing the GitHub repository's URL as a parameter to the git clone command from in a console window. You can get a copy of the URL from the repository's GitHub page and clicking on the green Code button, and then clicking on the copy button next to the HTTPS URL.
- When you clone a repository it is placed in a subdirectory named with the name of the repository. So make sure you are in the directory where you keep all of your source repositories before you run the command.
    - git clone https://github.com/webprogramming260/startup-example.git
    - cd startup-example
- This is the pattern that you want to make a reflexive part of your development process.
    - Pull the repository's latest changes from GitHub (git pull)
    - Make changes to the code
    - Commit the changes (git commit)
    - Push the changes to GitHub (git push)
- The first time you make a push request to a repository Git will ask you how you want to identify yourself and what credential (e.g. password) to use in order to authenticate with GitHub. You will need to create a Personal Access Token and provide that as your password.Make sure you use the email that you provided for your GitHub account.
    - git config --global user.email "you@example.com"
    - git config --global user.name "Your name"
- You can run the fetch command in terminal to see what changes have been made on GitHub without chaning your local environment. Then, run the status Git command to see the differences between clones and see that we are missing a commit. Then you can use pull to sync your local environment with the repository
    - git fetch
    - git status
    - git pull
- Forking a repository clones it to GitHub, and then you can pull it into your environment

- You can clone a repository from Github.com to your local computer. This pulls down a full copy of all the repository data. 
  - 1. On GitHub, navigate to the main page of the repository
  - 2. Click the Code button
  - 3. Copy the UTL for the repository 
    - To clone the repository using HTTPS, under HTTPS click the clipboard
    - To clone using an SSH key, click SSH and then the clipboard
    - To clone using GitHub CLI, Click GitHub CLI and then the clipboard
  - 4. Open terminal
  - 5. Change the current working directory to the location where you want the cloned directory
  - 6. Type "git clone", then past the url you copied
    - "git clone [the url you copied]
  - 7. Press enter to create the local clone

- Personal access tokens are an alternative to using passwords for authentication to GitHub  when using the GitHub API or the command line. They are intended to access GitHub on your behalf. There are two types: fine grained and personal(classic). Fine grained is recommended. 

## A Brief History of Web Programming
- Three Distinct Phases
    - The formation of the internet that supports the communication of web applications
    - The creation of HTML and HTTP that made it possible to share hyperlinked docs (Web1.0)
    - The creation of CSS and Javascript that enabled interactive web applications (Web 2.0)

# Web Server Setup

## Tech Stack
- The collection of technologies that you use to create or deliver your web appp is called a technology stack
- At the top of your stack is your web framework (ie. Angular, React, Vue, Svelte)
- The framework then communicates with one or more web services to provide authentication, business, data, and persistent storage
- The web service then uses backend services such as chaching, database, logging, and monitoring
- Here is our tech stack:
    - React for the web framework
    - Caddy as the web server hosted on AWS
    - Running web services with Node.js
    - MongoDB as the database hosted on MongoDB Atlas


## AWS - EC2
- Steps to create a web server
    - 1. Open the AWS console in your browser and login
    - 2. Navigate to the EC2 service
    - 3. Change you region to US East (N. Virginia) - us-east-1. This will make it so that your server is located there. This is cruc ial because the Amazon Machine Image you will use is only available there
    - 4. Select the option to "Launch Instance"
    - 5. Give your instance a meaningful name (i.e. owner-purpose-version)
    - 6. Select your AMI
    - 7. Select t3.nano, t3.micro, or t2.micro for the instance type depending on power needed
    - 8. Create a new key pair and save it to your local dev environment. They are reusable
    - 9. Make sure network settings are auto-assign public IP. Firewall(security group) should be "Create security group". Allow SSH, HTTP, and HTTPS traffic from anywhere
    - 10. Launch instance

## SSH into Your Server
- SSH is used to shell into the server. It requires the public IP address from the EC@ instance and the location of your key pair file. 
    - ssh -i [key pair file] ubuntu@[ip address]
- You may get a warneing that your key pair file permissions are too open. If so,  then you can restrict the permissions on your file so that they aren't accessible to all users by running the chmod command in the terminal:
    - chmod 600 [key pair file]
- You can now run "ls -l" in the terminal to see the ubuntu user's home directory
    - The public_html directory contains all of the static files that you are serving up directly through Caddy when using it as a web service
    - The services directory is the place where you are going to install all of your web services when they are built
- There are 2 choices to keep the same public IP address, and both are recommended to do at the same time:
    - Never stop your server
    - Assign an elastic IP address to your server so that it keeps the same address even if you stop it
- Here is how to assign an elastic IP address:
    - 1. Open the AWS console in your browser and login
    - 2. Navigate to the EC2 Service
    - 3. From the Menu on the left select "Network and Security | Elastic IPs"
    - 4. Press the Allocate Elastic IP address Button
    - 5. Press the Allocate Buttion
    - 6. Select the newly displayed allocated  address and press the Actions button
    - 7. Select the Associate Elastic IP address option
    - 8. Click on the Instance box and select your server instance
    - 9. Press Associate

## Route 53
- Route 53 is the AWS service that handles everything DNS related. It enables you to buy a domain name, host your domain on their DNS servers, and create DNS records
- How to cpurchase a domain name on Route 53:
    - 1. Open the AWS console in your browser and login
    - 2. Navigate to the Route 53 service
    - 3. Select the Domain > Registered domains option from the menu on the left
    - 4. Push the Register Domain option
    - 5.  Select the TLD that you want. AWS currently offers the .click TLD and .link
    - 6. Put your desired root domain into the search box and press check to see if its available
    - 7. Press Add to Cart
    - 8. Fill out the contact details. This is sent to the authorized DNS registrar and is what shows up to the world for your domain. Once registration is complete, you can see this info using the console program "whois". 
    - 9. Press Continue
    - 10. Review everything and press Complete Order
    - 11. Finally, it will show you have a hosted zone for your domain name

- ONce you have a domain name, you can use it to create DNS records that will map domain names to IP addresses or other domain names. This is how this is done:
    - 1. Open the AWS console in your browser and login
    - 2. Navigtate to the Route 53 service
    - 3. Select the Hosted Zones option from the menu on the left
    - 4. You should see your domain anme listed here.
    - 5. Click on your domain name to view the details. This should display existing DNS records with types such as NS and SOA
    - 6. First, create the root domain DNS record. This will associate your domain name with your server's Ip address and allow you to use your domain name in the browser to navigate to the server:
        - 1. Press the create record button
        - 2. In the Value box enter the public IP address of your server
        - 3. Press Create records
        - 4. A new A type record should appear in your list of records that represents the root domain name and your server's public IP address
    - 7. Next we will create a DNS record that will map to your server for any subdomain of your root domain name. THis is possible because DNS allows you to specify wildcards for a DNS record:
        - 1. Press the Create Record button
        - 2. In the Record name box enter the text *. This wildcard represents that any subdomain will match this record, so long as it is not explicitly defined by another DNS record.
        - 3. In the Value box enter the public IP address of your server
        - 4. Press Create records
        - 5. A new A type record should appear in your list of records that represents the wildcard subdomain name and your server's public IP address
- Some other record types are created. NS is the name server recored and it contains the names of authoratative name servers that authorize you to place DNS records in this DNS server. They add security. SOA records provide contact info about the owner of the domain name
- How to lease a domain name:
    - 1. Open the AWS browser console and login
    - 2. Use Route 53 to purchase a domain name
    - 3. Set up your DNS records in Route 53. Make sure you have a recored representing your root domain name and a wild card subdomain
- DNS stands for Domain Name System
-  You need a domain name to represent a web app so that you can create a secure HTTPS connection

## Caddy
- Caddy is a web service that listens for incoming HTTP requests. Caddy then serves up the requested statci files or routes the request to another web service. This abilitiy to route requests is called a gateway, or reverse proxy, and allows you to expose multiple web services as a single exxternal web service
- Caddy handles all of the creation and rotation of web certificates. This allows us to easily support HTTPS
- Caddy serves up all of your static HTML, CSS, and Javascript files. All of your early application work will be hosted as static files
- Caddy acts as a gateway for subdomain  requests to your Simon and Startup application services. For example, when a request is made to simon.yourdomain Caddy will proxy the request to Simon appplication running with node.js as an internal wegb service
- Configuration file: ~/Caddyfile
    - Contains the definitions for routing HTTP requests that Cadddy receives. Ths is used to determine the location where static HTML files are loaded from, and also to proxy requests into the services you will create later. Never modify this manually except for when you confiure the domain name of your server
- HTML Files: ~/public_html
    - This is the directory of files taht Caddy serves up when requests are made to the root or your web server. This is configured in the Caddyfile discussed above. If you actually look at the Caddyfile you will see that the statitc file server is mapped to /usr/share/caddy. That is the location that the file link in the Upuntu user's hom directory, ~/public_html, is pointing to
    - :80 {
        root * /usr/share/caddy
        file_server
   }
    - Whenever Caddy recieves an HTTP request for any domain name on port 80 it will use the path of the request to find a corresponding file in this directory. For example, a request for http://fanvote.click/index.html it will look for a file named index.html in the public_html directory 

## HTTPS, TLS, and Web Certificates
- HTTPS stands for Secure Hypertext Transport Protocol
- Having a secure connection means that all the data is enrypted usingthe TLS protocol
- TLS works by negotiating a shared secret that is then used to encrypt the data. This can be seen with curl and the parameter  -v
    - curl - v -s https://byu.edu > /dev/null
- The > /dev/null redirection throws away the acutal HTTP response
- A core peice of this negotiation is the exchange of aweb certificate that identifies the domain name of the server creating the secure connection.
- Let's Encrypt made it free and and easy to get web certificates
- Caddy uses Let's Encrypt to generate a web certificate every time an HTTPS request is made for a domain name that Caddy doesn't have a web certificate for. It does this by asking Let's Encrypt to verify that the domain for the requested certificate is actually owned by the requester. 
- How to use Caddy as a gateway to our different services and host our static web app files:
    - 1. Open a console window
    - 2. Use ssh console program to shell into your production environment server
        - ssh -i [key pair file] ubuntu@[your domain here]
    - 3. Edit Caddy's configuration file found in the ubuntu user's home directory
        - cd ~
        - vi Caddyfile
    - 4. Modify the Caddy rule for handling requests to port 80 (HTTP), to instead handle request for your domain name. By not specifying a port rule will serve up files using port 443 (HTTPS), and any request to port 80 will automatically redirect the browser to port 443. Replace :80 with your domian name and delete the colon
    - 5. Modify the Caddy rules that route the traffic for the two web applications that we will build. To do this replace the two places where yourdomain appears with your domain name.
    - 6. Review the Caddyfile to make sure it looks right. 
    - 7. Save the file and exit VI
        - :wq
    - 8. Restart Caddy so that your changes tak effect. 
        - sudo service caddy restart

## The Console
- Consoles (terminal) need to be POSIX compliant
- printf 'hello\n' -> hello
- ls -la lists all of the files that in a directory in long format
- The two primary purposes of the console are to view the files on the computer and to execute commands. 
- Types of console commands
    - echo: Output the parameters of the command
    - cd: change directory
    - mkdir: make directory
    - rmdir: remove directory
    - rm: remove file(s)
    - mv: move files(s)
    - cp: copy files
    - ls: list files
    - curl: command line client URL browser
    - grep: regular expression search
    - find: find files
    - top: view running processes with CPU and memory usage
    - df: view disk stats
    - cat: output the contents of a file
    - less: interactively output the contents of a file
    - wc: Count the words in a file
    - ps: View the currently running processes
    - kill: kill a currently running process
    - sudo: Execute a comand as a super user(admin)
    - ssh: Create a secure shell on a remote computer
    - scp: Securley copy files to a remote computer
    - history: show the history of commands
    - ping: Check if a website is up
    - tracert: Trace the connections to a website
    - dig: Show the DNS info for a domain
    - man: Look up a command in the manual
- How to chain the input and output of commands using special characters:
    - |: take the output from the command on the left and pipe or pass it to the command on the right
    - (>) : Redirect output to a file. Overwrite it if it exists
    - (>>) : Redirect output to a file. Append it if it exists
- Keystrokes with special meaining in the console:
    - CTRL-R: Use type ahead to find previous commands
    - CTRL-C: Kill the currently running command

## Editors
- The code editor is the workspace of a web app developer. 
- VI or Vim
    - To use VI, open your console and change directory to one that holds some code that you want to work on. 
        - vi index.html
    - There are two modes in VI, command mode and insert mode. Command mode is the default. To edit a doc, use the command "i" to enter insert mode. To exit insert mode, press ESC and then :q
    - VI commands:
        - :h : help
        - i : enter insert mode
        - u : undo
        - CTRL-r : redo
        - gg : go to beginning of file
        - G : go to end of file
        - / : search for text that you type after /
        - n : next search match
        - N : previous search match
        - v : visually select text
        - y : Yank or copy selected text to clipboard
        - p : paste clipboard
        - CTRL-wv : split window vertically
        - CTRL-ww : Toggle windows
        - CTRL-wq : Close current window
        - :e : Open a file
        - :w : write file(save)
        - :q : quit (:q! to quit without saving)

## Asking a good question
- Make sure questions are on-topic, suitable, search reasearch before posting a question, Wrtie a title that summarizes the specific problem, Introduce the problem before posting any code, help others reproduce the problem, Include all relevant tags, proofread before posting, Respond to feedback after posting, and Look for help asking for help

# HTML

## HTML Introduction
- HTML stands for HyperText Markup Language
- Originally designed to be a publishing format for web docs
- Text is valid HTML. Elements and tags provide structure
- HTML elements are represented with enclosing tags that may enclose other elements or text
- Tags designate the start and end of an HTML element
- open tags are denoted "<" and closing tags are denoted "/>"
- The <html> element represents the top level page structure
- The <head> element contains metadata about the page and page title
- The <body> element represents the content structure
- The <main> element represents the main content structure, as opposed to things like headers, footers, asides, and navigation content
- Every HTML element may have attributes that describe specific details of the element. 
    - The "id" attribute gives a unique ID to the element so that it can be distinguished
    - The "class" attribute is another common element that designates the element as being classified into a named group of elements
- A hyperlink in HTML is represented with an anchor (`<a>`) element that has an attribute containing the address of the hyperlink reference (`href`)
    - `<a href="https://fanvote.click">Go to Fanvote</a>`
- HTML defines a header (<!DOCTYPE html>) that tells the browser the type and version of the doc. This should be at the top of every HTLM file.
- Common HTML elements:
    - html : page container
    - head : Header info
    - title : Title of the page
    - meta : Metadata for the page such as character set or viewport settings
    - script : Javascript reference
    - include : External content reference
    - body : The entire content body of the page
    - header : Header of the main content
    - footer : footer of the main content
    - nav : Navigational inputs
    - main : Main content of the page
    - section : A section of the main content
    - aside : Aside content from the main content
    - div : A block division of content
    - span : and inline span of content
    - h<1-9> : Text heading (h1 biggest, h9 smallest)
    - p : paragraph
    - b : bring attention
    - table : table
    - tr : table row
    - th : table header
    - td : table data
    - ol, ul : ordered or unordered list
    - li : list item
    - a : anchor text to a hyperlink
    - img : graphical image reference
    - dialog : interacteve component such as a confirmation
    - form : A collection of user input
    - input: User input field
    - audio : audio content
    - video : video content
    - svg : scalabel vector graphic content
    - iframe : inline frame of another HTML page
- Comments in HTML are started with `<!-- commented text -->`
- Special Characters in HTML are used for defining file format. Basically, if a '<' or a '&' is part of the content on your page, you need to tell VS Code that it is textual content and not an HTML element.
- Character | Entities
    - `&` â†’ `&amp;`
    - `<` â†’ `&lt;`
    - `>` â†’ `&gt;`
    - `"` â†’ `&quot;`
    - `'` â†’ `&apos;`
    - ðŸ˜€ â†’ `&#128512;`

-HTML versions:

| Year  | Version | Features                                      |
|-------|---------|-----------------------------------------------|
| 1990  | HTML1   | format tags                                   |
| 1995  | HTML2   | tables, internationalization                  |
| 1997  | HTML3   | MathML, CSS, frame tags                       |
| 1999  | HTML4   | external CSS                                  |
| 2014  | HTML5   | email, password, media, and semantic tags     |

- The main HTML file in a web app should be index.html

## HTML Structure
- There is a distinction between structure elements that are block vs inline. A block element is meant to be a distinct block in the flow of the content structure. An inline element is meant to be inline with the content flwo of a block element. In other words, inline elements do not disrupt the flow of a block element's content. For example, the blcok element div(division) could have an inline element b in order to bring attention to a portion of its sub-text.



- Example
```
<body>
  <p>Body</p>
  <header>
    <p>Header - <span>Span</span></p>
    <nav>
      Navigation
      <div>Div</div>
      <div>Div</div>
    </nav>
  </header>

  <main>
    <section>
      <p>Section</p>
      <ul>
        <li>List</li>
        <li>List</li>
        <li>List</li>
      </ul>
    </section>
    <section>
      <p>Section</p>
      <table>
        <tr>
          <th>Table</th>
          <th>Table</th>
          <th>Table</th>
        </tr>
        <tr>
          <td>table</td>
          <td>table</td>
          <td>table</td>
        </tr>
      </table>
    </section>
    <aside>
      <p>Aside</p>
    </aside>
  </main>

  <footer>
    <div>Footer - <span>Span</span></div>
  </footer>
</body>
```
## HTML Input Elements


- Elements for accepting input of user data:

| Element   | Meaning                               | Example                                                   |
|-----------|---------------------------------------|-----------------------------------------------------------|
| form      | Input container and submission        | `<form action="form.html" method="post"> ... </form>`      |
| fieldset  | Labeled input grouping                | `<fieldset> ... </fieldset>`                              |
| input     | Multiple types of user input          | `<input type="" />`                                       |
| select    | Selection dropdown                    | `<select><option>1</option></select>`                     |
| optgroup  | Grouped selection dropdown            | `<optgroup><option>1</option></optgroup>`                 |
| option    | Selection option                      | `<option selected>option2</option>`                       |
| textarea  | Multiline text input                  | `<textarea></textarea>`                                   |
| label     | Individual input label                | `<label for="range">Range: </label>`                      |
| output    | Output of input                       | `<output for="range">0</output>`                          |
| meter     | Display value with a known range      | `<meter min="0" max="100" value="50"></meter>`            |


- The main purpose of the form element is to submit the values of the inputs it contains
- Thanks to Javascript, you don't have to have a form element to use input elements
- Example of a textarea element:
'''<form action="submission.html" method="post">
  <label for="ta">TextArea: </label>
  <textarea id="ta" name="ta-id">
Some text
  </textarea>
  <button type="submit">Submit</button>
</form>'''

- Pressing the submit button above would send the follwing data to the web server. The browser generates data by combing the text area's name attribute with the current value of the text area:
    - ta-id=Some+text
- You can set the type of input that is received with the "type" attribute.
- Types of inputs:

| Type            | Meaning                           |
|-----------------|-----------------------------------|
| text            | Single line textual value         |
| password        | Obscured password                 |
| email           | Email address                     |
| tel             | Telephone number                  |
| url             | URL address                       |
| number          | Numerical value                   |
| checkbox        | Inclusive selection               |
| radio           | Exclusive selection               |
| range           | Range limited number              |
| date            | Year, month, day                  |
| datetime-local  | Date and time                     |
| month           | Year, month                       |
| week            | Week of year                      |
| color           | Color                             |
| file            | Local file                        |
| submit          | Button to trigger form submission |


- common attributes of input elements:

| Attribute | Meaning                                                                 |
|-----------|-------------------------------------------------------------------------|
| name      | The name of the input. This is submitted as the name of the input if used in a form |
| disabled  | Disables the ability for the user to interact with the input            |
| value     | The initial value of the input                                          |
| required  | Signifies that a value is required in order to be valid                 |

- Several inputs have validation built into them. You can also specify the required attribute on an input element 
- The pattern attribut exists on text, search, url, tel, email, and password to provide a regular expression that must match for the input to be considered as valid. 
- Validation can also be built into your Javascript to check everything before submission
- Give validation feedback early in the user experience

## HTML Media
- HTML elements that represent media are img, audio, video, svg, and canvas
- img, audio, and video are references to an external file, while svg and canvas both contain the code to render a visual image that can be animated
- Use a full path to the reference if the image is not stored in your directory
- How to render an image:
``` <img alt="mountain landscape" src="https://images.pexels.com/photos/164170/pexels-photo-164170.jpeg" /> ```

- Audio files can include controls if you want the user to be able to control the audio playback, otherwise there is not visual representation. Autoplay makes the audio play as soon as the audio file is loaded and loop keeps it playing in a loop

- How to render audio:
``` <audio controls src="testAudio.mp3"></audio> ```

- Video has similar controls to audio. You may need to include crossorigin="anonymous" if you are requesting files from a different domain than the one serving your content

- How to render video:
``` <video controls width="300" crossorigin="anonymous"> <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" /> </video> ```

- Internal Media elements svg and canvas allow you to actually create images directly within your HTML

- SVG stands for Scalabel Vector Graphics. This is a way to render graphics inline in your HTML

- SVG example
``` <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" stroke="red" fill="red" style="border: 1px solid #000000"> <circle cx="150" cy="100" r="50" /> </svg> ```

- Canvas was introduced to facilitate 2D drawing and animation. 

- Canvas Example:

```<canvas id="canvasDemo" width="300" height="200" style="border: 1px solid #000000"></canvas>```

- Then you would Javascript to complete it

## Deploy Script
- Enter: ./deployFiles.sh -k ~/keys/production.pem -h yourdomain.click -s simon

# CSS
## CSS Intro
- CSS converts the structure of HTML into a vibrant, responsive experience
- With CSS, a programmer can animate the page, deploy custom fonts, respond to user actions, and dynamically alter the entire layout of the page based on the size of a device and its orientation
- CSS is primarily concerned with defining rulesets. Each rule has a selector that selects elements to apply the rule to, and one or more declarations that represent the property to style with the given property value
- There are 3 ways to associate CSS with HTMl
    - 1. Ust the style attribute of an HTML element and explicity assign one or more declarations

    ```html
    <p style="color:green">CSS</p>
    ```

    - 2. You can use the HTML style element to define CSS rules within the HTML doc. The style element should appear in the head element of the document so that the rules apply universally

    ```html
        <head>
        <style>
            p {
            color: green;
            }
        </style>
        </head>
        <body>
        <p>CSS</p>
        </body>
    ```

    - 3. You can use the link element to create a hyperlink reference to an external file containing CSS rules. This must appear in the head element of the doc

    ```html
    <link rel="stylesheet" href="styles.css" />
    ```

    ```p {
        color: green;
       }
    ```

- CSS rules cascade down from the highest nodes in the DOM tree to the lowest level. lower level declarations override higher level ones

- CSS defines everything as boxes. When you apply styles, you apply them to a specific rectanglular region. The innermost box holds the element's content (text or image). Next is the padding (background color). After padding is the border (color, thickness, line style). Finally is the margin. The margin is considered external to the actual styling of the box and therefore only represents whitespace. 

- By default, the width and hieght of an element is defined by the width and height of the content box. You can change the box-sizing CSS property from the default value of content-box to border-box in order to redefine the width and the height to also include the padding and the border. This makes it easier to style the elements when their visual size matches their acutal size

- The most current version of CSS is CSS3. The specification was divided into modules so that they could be implemented at different levels of maturity.

## CSS Selectors
- You select an element in CSS with this format:

    ```css
    body {
    font-family: sans-serif;
    }
    ```

- If you want to change an element, but only the instances of that element inside of another element, you can use a descendant combinator that is defined with a space delimited list of values where each item in the list is a descendant of the previous item. this would apply the color to all h2 decendants of the section element:

    ```css
    section h2 {
    color: #004400;
    }
    ```
-  There are other combinators as well:

| Combinator       | Meaning                 | Example       | Description                                     |
|------------------|-------------------------|---------------|-------------------------------------------------|
| Descendant       | A list of descendants    | body section  | Any section that is a descendant of a body       |
| Child            | A list of direct children| section > p   | Any p that is a direct child of a section        |
| General sibling  | A list of siblings       | div ~ p       | Any p that has a div sibling                     |
| Adjacent sibling | A list of adjacent sibling| div + p      | Any p that has an adjacent div sibling           |

- We can use the general sibling combinator to increase the whitespace padding on the left of paragraphs that are siblings of a level two heading. 

- in shorthand for padding, one value in a selector applies it to all sides of the slector. If there are two values, the first is top and bottom, the second is right and left. If there are 3 valuse, The first applies to the top, the next to left and right, and the last to the bottom. If there are 4 values, the first applies to the top, the second to the right, the third to the bottom, the fourth to the left

- in shorthand for border-radius, a single value applies to all corners, two values applies the first value to the top left corner and the second value applies to the top right and bottom left. If you have 4 values the first goes to the top left, the second to the top right, then bottom right, then bottom left

```css
h2 ~ p {
  padding-left: 0.5em;
}
```

-  If we want to apply styling to content in a certain class, we use class selectors. Here is an example of one for class="summary" (which would be in the HTML)

```css
.summary {
  font-weight: bold;
}
```

- You can combine the element name and class selectors to select tags within a class. Here is all of the p tags in the summary class:

```css
p.summary {
  font-weight: bold;
}
```

- You can also apply selectors directly to elements with a unique ID. No 2 elements of the HTML should have the same ID. This is an example of applying styling to the physics ID:

```css
#physics {
  border-left: solid 1em purple;
}
```

- Attribute selectors allow you to select elements based upon their attributes.
    - You can use an attribute selector to select any element with a given attribute: a[href].
    - You can also specify a required value for an attribute: a[href="./fish.png"] in order for the selector to match.
    - Attribute selectors also support wildcards: p[href*="https://"].

```css
p[class='summary'] {
  color: red;
}
```

- CSS also has several psuedo selectors which select based on positional relationships, mouse interations, hyperlink visitation status, and attributes. 

```css
section:hover {
  border-left: solid 1em purple;
}
```

## CSS Declarations

- CSS declarations specify a property and value to assign when the rule selector matches one or more elements. Here are some of the most common ones:

| Property        | Value                          | Example                   | Discussion                                                                            |
|-----------------|--------------------------------|---------------------------|----------------------------------------------------------------------------------------|
| background-color| color                          | red                       | Fill the background color                                                              |
| border          | color width style              | #fad solid medium          | Sets the border using shorthand where any or all of the values may be provided          |
| border-radius   | unit                           | 50%                       | The size of the border radius                                                          |
| box-shadow      | x-offset y-offset blur-radius color | 2px 2px 2px gray      | Creates a shadow                                                                       |
| columns         | number                         | 3                         | Number of textual columns                                                              |
| column-rule     | color width style              | solid thin black           | Sets the border used between columns using border shorthand                            |
| color           | color                          | rgb(128, 0, 0)            | Sets the text color                                                                    |
| cursor          | type                           | grab                      | Sets the cursor to display when hovering over the element                              |
| display         | type                           | none                      | Defines how to display the element and its children                                    |
| filter          | filter-function                | grayscale(30%)            | Applies a visual filter                                                                |
| float           | direction                      | right                     | Places the element to the left or right in the flow                                    |
| flex            |                                |                           | Flex layout. Used for responsive design                                                |
| font            | family size style              | Arial 1.2em bold           | Defines the text font using shorthand                                                  |
| grid            |                                |                           | Grid layout. Used for responsive design                                                |
| height          | unit                           | .25em                     | Sets the height of the box                                                             |
| margin          | unit                           | 5px 5px 0 0               | Sets the margin spacing                                                                |
| max-[width/height]| unit                         | 20%                       | Restricts the width or height to no more than the unit                                 |
| min-[width/height]| unit                         | 10vh                      | Restricts the width or height to no less than the unit                                 |
| opacity         | number                         | .9                        | Sets how opaque the element is                                                         |
| overflow        | [visible/hidden/scroll/auto]   | scroll                    | Defines what happens when the content does not fit in its box                          |
| position        | [static/relative/absolute/sticky] | absolute               | Defines how the element is positioned in the document                                  |
| padding         | unit                           | 1em 2em                   | Sets the padding spacing                                                               |
| left            | unit                           | 10rem                     | The horizontal value of a positioned element                                           |
| text-align      | [start/end/center/justify]     | end                       | Defines how the text is aligned in the element                                         |
| top             | unit                           | 50px                      | The vertical value of a positioned element                                             |
| transform       | transform-function             | rotate(0.5turn)           | Applies a transformation to the element                                                |
| width           | unit                           | 25vmin                    | Sets the width of the box                                                              |
| z-index         | number                         | 100                       | Controls the positioning of the element on the z axis                                  |

- CSS properties have a lot of units. Width can be in pixels(px) or inches (in). You can also use relative units, such as percentage of the parent element (50%), percentage of minimum viewport dimension (25vmin), or a multiplier of the size of the letter m (1.5rem) as defined by the root element. Here is an example and a lilst of the most common units:

```css
p {
  width: 25%;
  height: 30vh;
}
```

| Unit  | Description                                                   |
|-------|---------------------------------------------------------------|
| px    | The number of pixels                                           |
| pt    | The number of points (1/72 of an inch)                         |
| in    | The number of inches                                           |
| cm    | The number of centimeters                                      |
| %     | A percentage of the parent element                             |
| em    | A multiplier of the width of the letter m in the parent's font |
| rem   | A multiplier of the width of the letter m in the root's font   |
| ex    | A multiplier of the height of the element's font               |
| vw    | A percentage of the viewport's width                           |
| vh    | A percentage of the viewport's height                          |
| vmin  | A percentage of the viewport's smaller dimension               |
| vmax  | A percentage of the viewport's larger dimension                |

- Here's a list of ways to define color:

| Method     | Example                          | Description                                                                                                                            |
|------------|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| keyword    | red                              | A set of predefined colors (e.g. white, cornflowerblue, darkslateblue)                                                                  |
| RGB hex    | #00FFAA22 or #0FA2               | Red, green, and blue as a hexadecimal number, with an optional alpha opacity                                                            |
| RGB function| rgb(128, 255, 128, 0.5)         | Red, green, and blue as a percentage or number between 0 and 255, with an optional alpha opacity percentage                             |
| HSL        | hsl(180, 30%, 90%, 0.5)          | Hue, saturation, and light, with an optional opacity percentage. Hue is the position on the 365 degree color wheel (red is 0 and 255). Saturation is how gray the color is, and light is how bright the color is. |

## CSS Fonts
- The CSS font-family property defines what fonts should be used. The property value represents an ordered list of fonts. The first font in the list that is available with be used. 

- There are 4 major families of fonts
    - 1. Serif: have extra strokes (serifs are small strokes attached to the ends of a characther's major strokes)
    - 2. sans-serif: don't have extra strokes
    - 3. fixed: all characters are the same size
    - 4. symbol: represent non-language characters (arrows and emojis)

-If you want to use fonts not found on the standard user's computer, you can have the browser load a font using @font-face:

```css
@font-face {
  font-family: 'Quicksand';
  src: url('https://cs260.click/fonts/quicksand.ttf');
}

p {
  font-family: Quicksand;
}
```

- If you don't want to host font files on your server, then you can load them from a font provider, like Google. :

```css
@import url('https://fonts.googleapis.com/css2?family=Rubik+Microbe&display=swap');

p {
  font-family: 'Rubik Microbe';
}
```

## CSS Animation

- Using CSS to animate your components is an easy way to make your application feel alive and interactive. You create CSS animations using the animation properties and defining keyframes for what the element should look like at different times

- We have a paragraph of centered text and we want to zoom in until its size is 20% of the view height:

```css
p {
  text-align: center;
  font-size: 20vh;
}
```

- To make this happen, we specify that we are animating the selected elements by adding the animation-name property with a value of demo. This name refers to the keyframes that will be specified later. The keyframes tell CSS what properties should be appllied at different key points in the animation sequence. We also add an animation-duration property in order to specify that the animation should last for three seconds:

```css
p {
  text-align: center;
  font-size: 20vh;

  animation-name: demo;
  animation-duration: 3s;
}
```

- Now we create keyframes. We define key points, and CSS generates a smoot transition between them. THis example starts with invisble text and zooms in until it's at full size:

```css
@keyframes demo {
  from {
    font-size: 0vh;
  }

  to {
    font-size: 20vh;
  }
}
```

- You can make it look lik it bounces by adjusting the key frames like this:

```css
@keyframes demo {
  from {
    font-size: 0vh;
  }

  95% {
    font-size: 21vh;
  }

  to {
    font-size: 20vh;
  }
}
```

## Responsive Design
- The ability to configure the interface so the application accommodates and takes advantage of the screen's size and orientation is called responsive design

- Some elements of HTML and CSS are already fluid (ie paragraph tags), however there are other features that can completely change the layout of the application based on the devie's size and orientation

- The CSS display property enables you to change how an HTML element is displayed by the browser. Here are some common display property options:

| Value  | Meaning                                                                                                  |
|--------|----------------------------------------------------------------------------------------------------------|
| none   | Don't display this element. The element still exists, but the browser will not render it.                 |
| block  | Display this element with a width that fills its parent element. A p or div element has block display by default. |
| inline | Display this element with a width that is only as big as its content. A b or span element has inline display by default. |
| flex   | Display this element's children in a flexible orientation.                                                |
| grid   | Display this element's children in a grid orientation.                                                    |

- Here is an example of how to implement different display types:

```css
.none {
  display: none;
}

.block {
  display: block;
}

.inline {
  display: inline;
}

.flex {
  display: flex;
  flex-direction: row;
}

.grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
}
```

- The code above would render like is shown below. Look at how each different element shows up to get an idea of what each display option does:

![CSS Display Image](https://raw.githubusercontent.com/webprogramming260/.github/main/profile/css/responsive/cssDisplay.jpg)

- You can use this meta tag to make sure that your browser doesn't scale pages, making it so that smartphones can automatically scale your page to fit the device viewing it. This would be placed in the head of the html:

```html
<meta name="viewport" content="width=device-width,initial-scale=1" />
```

- The Float property in css moves an element to the left or right of it's container element and allows inline elements to wrap around it. This could be used to wrap a paragraph of text around an aside. It would be implemented like this:

```css
aside {
  float: right;
  padding: 3em;
  margin: 0.5em;
  border: black solid thin;
}
```

- the @media selector dynamically detects the size and orientation of the device and applies CSS rules to represent the structure of the HTML in a way that accommodates the change

- We use the @media selector to tell us which side of teh screen (viewport) is longest. A media query takes one or more predicates separated by boolean operators. In our case, we simply want to know if the screen is oriendted in portrait mode or not. If so, then we transform all of our div elements by rotating them 270 degrees

```css
@media (orientation: portrait) {
  div {
    transform: rotate(270deg);
  }
}
```

- You can also use media queries to make entire pieces of your application disappear, or move to a different location. If we had an aside that was helpful when the screen is wide, but took up too much room on a narrow screen, we could use this media query to make it disappear:

```css
@media (orientation: portrait) {
  aside {
    display: none;
  }
}
```

## CSS Grid

- Grid is useful when you want to display a group of child elements in a responsive grid. It starts with a container element that has a bunch of child elements:

```html
<div class="container">
  <div class="card"></div>
  <div class="card"></div>
  <div class="card"></div>
  <div class="card"></div>
  <div class="card"></div>
  <div class="card"></div>
  <div class="card"></div>
  <div class="card"></div>
  <div class="card"></div>
</div>
```

We can turn this into a responsive grid by including a CSS display property with the value of grid on the container element. This tells the browser that all of the children of this element are to be displayed in a grid flow. the grid-template-columns property specifies the layout of the grid columns. We set this to repeatedly define each column to auto-fill the parent element's width with children that are resized to a minimum of 300 pixels and a max of one equal fractional unit (1fr) of the parents' total width. A fractional unit is dynamically computed by splitting up the parent element's width into equal parts. Next, we fix the height of the rows to be exactly 300 pixels by specifying the grid-auto-rows property. Finally, we finish off the grid configuration by setting the grid-gap property to have a gap of at least 1 em between each grid item:

```css
.container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  grid-auto-rows: 300px;
  grid-gap: 1em;
}
```

## CSS Flex

- The flex display layout is useful when you want to partition your application into areas that responsively move around as the window resizes or the orientation changes. 

- Here's some example HTML that we can apply flex to:

```html
<body>
  <header>
    <h1>CSS flex &amp; media query</h1>
  </header>
  <main>
    <section>
      <h2>Controls</h2>
    </section>
    <section>
      <h2>Content</h2>
    </section>
  </main>
  <footer>
    <h2>Footer</h2>
  </footer>
</body>
```

- You can make the body element into a responsive flexbox by including the CSS display property with the value of "flex". this tells the browser that all of the children of this element are to be displayed in a flex flow. We want our top level flexbox children to be column oriented and so we add the flex-direction property with a value of column. We then add some simple other declarations to zero out the margin and fill the entire viewport with our application frame. 100vh is 100% of the viewport height:

```css
body {
  display: flex;
  flex-direction: column;
  margin: 0;
  height: 100vh;
}
```

- To get the division of space for the flexbox children correct, we add the follwing flex properties to each of the children:
    - 1. Header: "flex: 0 80px" - Zero means it will not grow and 80 px means it has a starting basis height of 80 pixels. This creates a box with a fixed size
    - 2. Footer: "flex: 0 30px" - This also has a fixed height 
    - 3. Main: "flex: 1" - One feans it will get one fractional unit of growth and since it is the only child with a non-zero growth value, it will get all the remaining space. Main also gets some additional properties because we want it to also be a flexbox container for the controls and content area. So we set its display to be flex and specify the flex-direction to be row so that the children are oriented side by side. 

```css
header {
  flex: 0 80px;
  background: hsl(223, 57%, 38%);
}

footer {
  flex: 0 30px;
  background: hsl(180, 10%, 10%);
}

main {
  flex: 1;
  display: flex;
  flex-direction: row;
}
```

- Now we just add CSS to control the content areas represented by the two child section elements. We want the controls to have 25% of the space and the content to have the remaining. So we set the flex property value to 1 and 3 respectively. That means that the controls get one unit of space and the content gets three units of space. No matter how we resize things, this ration will responsively remain. 

```css
section:nth-child(1) {
  flex: 1;
  background-color: hsl(180, 10%, 80%);
}
section:nth-child(2) {
  flex: 3;
  background-color: white;
}
```

- We also want to handle small screen sizes. To do this, we add some media queries that drop the header and footer if the viewport gets to short, and orient the main sections as columns if it gets to narrow. To support narrow screen (portrait mode), we include a media query that detects when we are in portrait orientation and sets the flex-direction of the main element to be column instead of row. This causes the children to be stacked on top each other instead of side by side. To handle making our header and footer disappear, we use a media query that triggers when our viewport height has a max value of 700 px or less. When that is true, whe change the display property for both header and footer to none so that they will be hidden. When that happens, the main element becomes the only child since it has a flex value of 1, it takes over everything. 

```css
@media (orientation: portrait) {
  main {
    flex-direction: column;
  }
}

@media (max-height: 700px) {
  header {
    display: none;
  }
  footer {
    display: none;
  }
}
```


## Debugging CSS

- You can use the browser's developer tool to inspect the CSS properties and vizualize the HTML layout. Using the Google Chrome debugger, you can access the dev tools by right clicking on the HTML page element that you want to debug and selecting the inspect option. The elements tab shows you different elements and you will visually see what the padding, borders, and margins are set to. The Styles pane shows all ofthe CSS properties applied to the currently selected element. If you scroll down to the bottom of the styles pane, you will see the CSS box. By moving the cursor over the different parts of the CSS box, it will highlight the different parts in the browser window.

- You can change any of the CSS properties, and even add new properties directly in the debugger. This allows you to see what each property is contributing and change them to see how that impacts the rendering. This is a great way to figure out what CSS works best without having to continually change the CSS file and refresh the browser.

## CSS Frameworks

- CSS frameworks provide functions and components that commonly appear in web applications. 

- Tailwind is a new CSS framework and its associated with the library Tailwind UI. Tailwind uses smaller definitions that are applied specifically to individual HTML elements. This moves much of the CSS representation out of the CSS file and directly into the HTML:

```html
<div class="pt-6 md:p-8 text-center md:text-left space-y-4">
  <img class="w-24 h-24 md:w-48 md:h-auto md:rounded-none rounded-full mx-auto" src="profile.png" />
  <p class="text-lg font-medium">â€œTailwind CSSâ€</p>
</div>
```

- Boostrap can be integrated into web applications simply by referencing the Bootstrap CSS files from their content delivery network (CDN). You then add the HTML link elements to your head element like this:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
  </head>
  <body>
    ...
  </body>
</html>
```

- If you are using Bootstrap components that require Javascript (carousel, buttons, etc), you will also need to includ Bootstrap's Javascript module. You add this by putting the follwoing at the end of your HTML body element:

```html
<body>
  ...

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"
  ></script>
</body>
```

- You can use the Node Package Manager (NPM) to download Bootstrap and include it in your source code. That way you don't have to rely on someone else's server to provide you with a vital piece of you app. To include Bootstrap in your app using NPM, run the follwing in terminal: "npm install bootstrap@5.2.3"

- When we use the Bootstrap "btn" CSS class, the button gets a nice looking rounded appearance. The Bootstrap "btn-primary" class shades the button with the current primary color for the app (blue default). The follwoing shows a bootstrap button:

```html
// Bootstrap styled button
<button type="button" class="btn btn-primary">Bootstrap</button>

// Default browser styled button
<button type="button">Plain</button>
```

- Example of how to include Bootstrap's CSS and JS. Place the link tag in the headd for our CSS and the script tag for our JS bundle bofore the closing body tag:

```html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  </head>
  <body>
    <h1>Hello, world!</h1>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>
```

- Bootstrap requires HTML5

```html
<!doctype html>
<html lang="en">
  ...
</html>
```

- It also requires a responsive meta tag. It is developed mobile first:

```html
<meta name="viewport" content="width=device-width, initial-scale=1">
```

- Bootstrap switches the global box-sizing value from content-box to border-box. This ensures padding doesn't affect the final computed width of an element. 

```css
.selector-for-some-widget {
  box-sizing: content-box;
}
```
- Bootstrap uses reboot to correct inconsistencies across browsers and devices.


# Javascript

## Javascript Introduction

- Javascript is a weakly typed language. It is typically executed using an interpreter at runtime instead of compliling it into a machine specific binary at buld time. This makes it portable, but allows for errors. These errors typically only get discovered when the program crashes at execution. 

- The following JavaScript will concatenate three strings together and then thow away the result:

```
'Hello' + ' ' + 'world';
```

- Use the console.log function to output the string to the debugger console:

```javascript
console.log('Hello' + ' ' + 'world');
// OUTPUT: Hello world
```

- You can also write your own functions:

```javascript
function join(a, b) {
  return a + ' ' + b;
}

console.log(join('Hello', 'world'));
// OUTPUT: Hello world
```


- Comments in Javascript are written like this:

```javascript
// Line comment

/*
Block comment
*/
```

- You should end Javascript statements with a semi colon. Code blocks, and their resulting scope, are defined with curly braces

## Javascript Console

- The Javascript console object provides interaction with the Javascript runtime's debugger console. This usage of console should not be confused with you operating system's console (terminal). The console object provides functionality for outputting the value of text and objects, running timers, and coutning iterations. These are useful debugging tools wehn you can actually execute your code in an interactive debugger (VS code)

- The basic usage of the console object is to output a log message:

```javascript
console.log('hello');
// OUTPUT: hello
```

- You can format messages with Javascript's placeholders:
  - %s is a string placeholder
  - %d is a number placeholder (int or float)
  - %i is a integer placeholder
  - %f is a float placeholder
  - %o is an object placeholder
  - %j is a JSON placeholder
  - %c is a placeholder to apply  CSS styles to output text

- You can create formatted messages in the log parameter:

```javascript
console.log('hello %s', 'world');
// OUTPUT: hello world
```
- You can even specify CSS declarations in order to style the log output:

```javascript
console.log('%c JavaScript Demo', 'font-size:1.5em; color:green;');
// OUTPUT: JavaScript Demo //in large green text
```

- If you are tyring to see how long a piece of codie is running you can wrap it with time and timeEnd calls and it will output the duration between the time and timeEnd calls:

```javascript
console.time('demo time');
// ... some code that takes a long time.
console.timeEnd('demo time');
// OUTPUT: demo time: 9762.74 ms
```

```javascript
console.time('log time');
console.log('%c Hello World', 'color: purple');
console.timeEnd('log time');
```

- You can count how many times a block of code is called using the "count" function. This count is not zero indexed:

```javascript
console.count('a');
// OUTPUT: a: 1
console.count('a');
// OUTPUT: a: 2
console.count('b');
// OUTPUT: b: 1
```

## Adding Javascript to HTML

- You can insert Javascript into HTML either by directly including it in the HTML code within a "script" element, or by using the "src" attribute of the script element to reference an external Javascript file. 

- index.js

```javascript
function sayHello() {
  console.log('hello');
}
```

- index.html

```html
<head>
  <script src="index.js"></script>
</head>
<body>
  <button onclick="sayHello()">Say Hello</button>
  <button onclick="sayGoodbye()">Say Goodbye</button>
  <script>
    function sayGoodbye() {
      alert('Goodbye');
    }
  </script>
</body>
```

- notice that we call the sayHello and sayGoodby js functions from the HTML in the "onclick" attribute of the button element. Special attributes like "onclick" automatically create event listeners for different DOM events that call the code contained in the attribute's value. The code specified by the attribute value can be a simple call to a function or any JS code

```html
<button onclick="let i=1;i++;console.log(i)">press me</button>
<!-- OUTPUT: 2 -->
```

- best practice is to place the script tag with the source at the end of the "body" element

## Javascript Type and Construct

- Variables are declared using either "let" or "const". "let" allows you to change the value of the variable while "const" will cause an error if you attempt to change it. 

```javascript
let x = 1;

const y = 2;
```


- These are the different primitive types in JS

| Type      | Meaning                                            |
|-----------|----------------------------------------------------|
| Null      | The type of a variable that has not been assigned a value. |
| Undefined | The type of a variable that has not been defined.   |
| Boolean   | true or false.                                     |
| Number    | A 64-bit signed number.                            |
| BigInt    | A number of arbitrary magnitude.                   |
| String    | A textual sequence of characters.                  |
| Symbol    | A unique value.                                    |


- Boolean, Number (which is floats and ints), and string are most commonly used to create a variable.  You can also have variables refer to Null or Undefined primitive. Because JS doesn't enforce the delcaration of a variable before using it, it is posible to have a variable of type undefined.

- In addition to primitives, here are Javascript object types:

| Type     | Use                                                                 | Example                      |
|----------|---------------------------------------------------------------------|------------------------------|
| Object   | A collection of properties represented by name-value pairs. Values can be of any type. | {a:3, b:'fish'}              |
| Function | An object that has the ability to be called.                        | function a() {}              |
| Date     | Calendar dates and times.                                           | new Date('1995-12-17')       |
| Array    | An ordered sequence of any type.                                    | [3, 'fish']                  |
| Map      | A collection of key-value pairs that support efficient lookups.     | new Map()                    |
| JSON     | A lightweight data-interchange format used to share information across programs. | {"a":3, "b":"fish"}          |


- When dealing with a number variable, JS supports standard math operators like +, -, *, /, and ==. For strings, JS supports + (concaconate) and === (equality. Yes, three equal signs)

- JS is weakly typed. This means that a variable always has a type, but the variable can change type when it is assigned a new value, or that types can be  automatically converted based upon the context that they are used in. Sometimes the results of automatic conversions can be uneexpected from programmers whho are used to strong typed languages:


```javascript
2 + '3';
// OUTPUT: '23'
// Explanation: The `+` operator between a number (2) and a string ('3') results in type coercion. The number 2 is converted to the string '2', and the strings are concatenated. 
// Result: '23'

2 * '3';
// OUTPUT: 6
// Explanation: The `*` operator between a number (2) and a string ('3') coerces the string '3' into the number 3. The result is the multiplication 2 * 3, which is 6.

[2] + [3];
// OUTPUT: '23'
// Explanation: When the `+` operator is used with arrays, the arrays are coerced into their string representations. `[2]` becomes '2' and `[3]` becomes '3'. The result is string concatenation, resulting in '23'.

true + null;
// OUTPUT: 1
// Explanation: Both `true` and `null` are coerced to numbers in arithmetic operations. `true` becomes 1, and `null` becomes 0. The result is 1 + 0, which equals 1.

true + undefined;
// OUTPUT: NaN
// Explanation: `true` is coerced to 1, but `undefined` cannot be coerced into a meaningful number, resulting in NaN (Not a Number). Therefore, the result is 1 + NaN, which is NaN.
```

- Getting unexpected results is especially common when dealing with the equality operator

```javascript
1 == '1';
// OUTPUT: true
// Explanation: JavaScript performs type coercion with `==`. The string '1' is converted to the number 1, 
// so 1 == 1, resulting in true.

null == undefined;
// OUTPUT: true
// Explanation: `null` and `undefined` are considered loosely equal in JavaScript when using `==`, so the comparison evaluates to true.

'' == false;
// OUTPUT: true
// Explanation: JavaScript coerces both '' (empty string) and false to 0, so 0 == 0, which results in true.
```

- The unexpected results happen in JS because it uses complex rules for defining equality that depend on the conversion of a type to a boolean value. It uses strict equality (===) and inequality (!===) operators to get around this. They don't do type conversion and just compute exact equality:

```javascript
1 === '1';
// OUTPUT: false

null === undefined;
// OUTPUT: false

'' === false;
// OUTPUT: false
``` 

- Almost always use strict equality

- JS includes if, else and if else statements:

```javascript
if (a === 1) {
  //...
} else if (b === 2) {
  //...
} else {
  //...
}
```

- There is also a ternary operator that compacts the if-else representation:

```javascript
// The ternary operator is a compact form of an if-else statement.
// Syntax: condition ? expressionIfTrue : expressionIfFalse;

a === 1 ? console.log(1) : console.log('not 1');
// Explanation:
// If a is equal to 1, console.log(1) will execute.
// Otherwise, console.log('not 1') will execute.
```

- You can use boolean operations in the expression to create complex predicates. Boolean operators include &&(and), || (or), and !(not)

```javascript
if (true && (!false || true)) {
  //...
}

// Explanation:
// This is a logical condition combining AND (&&) and OR (||) operators with a negation (!).

// Breaking it down:
// 1. (!false || true):
//    - !false becomes true.
//    - So, the condition becomes (true || true), which evaluates to true.

// 2. true && true:
//    - The first part is true, and the result from step 1 is also true.
//    - Since both parts of the AND (&&) condition are true, the entire expression evaluates to true.

// This means the code inside the if block will be executed because the condition is true.
```

- JS supports many common loop constructs. This includes for, for in, for of, while, do while, and switch.

- for loop:

```javascript
for (let i = 0; i < 2; i++) {
  console.log(i);
}
// OUTPUT: 0 1
```

- do while loop

```javascript
// The `do` statement will always run at least once.
// The `while` statement checks the condition after the `do` block has been executed.
// If the `while` condition is not met (evaluates to false), the loop will stop.
// If the `while` condition is met (evaluates to true), the loop will continue to execute the `do` block until the condition becomes false.

let i = 0;
do {
  console.log(i);
  i++;
} while (i < 2);
// OUTPUT: 0 1
```

- while loop

```javascript
let i = 0;
while (i < 2) {
  console.log(i);
  i++;
}
// OUTPUT: 0 1

// Explanation:
// This is a traditional while loop.
// The condition (i < 2) is checked before each iteration.
// If the condition is true, the code inside the block is executed.
// The loop stops as soon as the condition becomes false.
// In this case, the loop runs twice (for i = 0 and i = 1) and then stops when i equals 2.
```

- for in statements iterate over an object's property names

```javascript
const obj = { a: 1, b: 'fish' };
for (const name in obj) {
  console.log(name);
}
// OUTPUT: a
// OUTPUT: b

// Explanation:
// The `for...in` loop iterates over all the enumerable properties of the `obj` object.
// In each iteration, the variable `name` holds the name of a key (property) in the object.
// For this object, the keys are 'a' and 'b', which are printed as output.
```

- For arrays, the objects' name is the array index:

```javascript
const arr = ['a', 'b'];
for (const name in arr) {
  console.log(name);
}
// OUTPUT: 0
// OUTPUT: 1

// Explanation:
// The `for...in` loop iterates over the enumerable properties of an array.
// For an array, the enumerable properties are the indexes (0, 1, etc.).
// In this case, `name` holds the index of the current element in each iteration.
// Therefore, the loop outputs the indexes: 0 and 1.
```

- If you want the values, use a for of statement for arrays, maps, sets, etc:

```javascript
const arr = ['a', 'b'];
for (const val of arr) {
  console.log(val);
}
// OUTPUT: 'a'
// OUTPUT: 'b'

// Explanation:
// The `for...of` loop iterates over the values of the array directly.
// In each iteration, `val` holds the current element in the array.
// Therefore, the loop outputs the values: 'a' and 'b'.
```

- All of the looping constructs allow either break or continue statements to abort or abandon the loop

```javascript
let i = 0;
while (true) {
  console.log(i);
  if (i === 0) {
    i++;
    continue;
  } else {
    break;
  }
}

// OUTPUT: 0 1

// Explanation:
// - The `while (true)` loop creates an infinite loop, but it's controlled by the `break` statement.
// - On the first iteration, `i` is 0, so the loop logs 0, increments `i`, and uses `continue` to skip the rest of the iteration.
// - On the second iteration, `i` is 1, so the loop logs 1 and then breaks, ending the loop.
```

## Javascript Strings

- Strings are a primitive type in Javascript. A string is specified by surrounding a squence of characters with sing quotes, double quotes, or backticks. Single and double quotes are equivalent, but backticks define string literals that may contain JS that is evaluated in place and concatenated into the string. A string literal replacement specifier is declared with a dollar sign wollowed by a curly brace pair. Anything inside the curly braces is evaluated as JS. You can also use backticks to create multiline strings without having to explicitly escape the newline characters using \n. 

```javascript
// Single and double quotes work the same for strings
'quoted text'; // " also works

// Template literals using backticks
const l = 'literal';
console.log(`string ${l + (1 + 1)} text`);
// OUTPUT: string literal2 text

// Explanation:
// Template literals (using backticks) allow you to embed expressions using `${}`.
// This is similar to Python f-strings.
// You can also create multiline strings using backticks without needing to escape newline characters.
```

- Javascript supports unicode (16 bit unsigned integers), making useful in almost every language, including those wrtiten right to left

- The string object has several interesting functions. Here are some:

| Function        | Meaning                                                       |
|-----------------|---------------------------------------------------------------|
| `length`        | The number of characters in the string                         |
| `indexOf()`     | The starting index of a given substring                        |
| `split()`       | Split the string into an array on the given delimiter string   |
| `startsWith()`  | True if the string has a given prefix                         |
| `endsWith()`    | True if the string has a given suffix                         |
| `toLowerCase()` | Converts all characters to lowercase                          |

```javascript
const s = 'Example:ì¡°ì„ ê¸€';

console.log(s.length);
// OUTPUT: 11

console.log(s.indexOf('ì¡°ì„ ê¸€'));
// OUTPUT: 8

console.log(s.split(':'));
// OUTPUT: ['Example', 'ì¡°ì„ ê¸€']

console.log(s.startsWith('Ex'));
// OUTPUT: true

console.log(s.endsWith('ì¡°ì„ ê¸€'));
// OUTPUT: true

console.log(s.toLowerCase());
// OUTPUT: example:ì¡°ì„ ê¸€
```

## Functions

- In JS, functions are first class objects. That means they can be assigned a name, passed as a parameter, returned as a result, and referenced from an obect or array just like any other variable

- The basic syntaxx of a function begins with the "function" keyword followed by zero or more parameters and a body that may contain zero or more returns. The return may return a single bvalue. There are no type declarations

```javascript
function hello(who) {
  return 'hello ' + who;
}

console.log(hello('world'));
// OUTPUT: hello world
```

- a function with no return value usaually exists to produce some side effect like modifying a parameter or interacting  with an exxternal program. This example shows a side effect function outputting text to the debugger console:

```javascript
function hello(who) {
  who.count++;
  console.log('hello ' + who.name);
}

hello({ name: 'world', count: 0 });
// OUTPUT: hello world
```
```javascript
function hello(who) {
  who.count++;
  console.log('hello ' + who.name);
}

hello({ name: 'world', count: 0 });
// OUTPUT: hello world
```

```javascript
function hello(who) {
  who.count++;
  console.log('hello ' + who.name);
}

hello({ name: 'world', count: 0 });
// OUTPUT: hello world
```

- When a function is called, the caller may choose what parameters to provide. If a parameter isn't provided, then the value of teh parameter is undefined when the function executes. Functions can also define a default value. This is done by assigning a value to the parameter in the function declaration:

```javascript
function labeler(value, title = 'title') {
  console.log(`${title}=${value}`);
}

labeler();
// OUTPUT: title=undefined

labeler('fish');
// OUTPUT: title=fish

labeler('fish', 'animal');
// OUTPUT: animal=fish

// Explanation:
// - The `value` parameter does not have a default value, so if it is not provided, it becomes undefined.
// - The `title` parameter has a default value of 'title', so if it is not provided, it defaults to 'title'.
// - When both parameters are provided, they override the default values.
```

- Functions in JS are commonly assigned to a variable to make it easier to pass them in as parameters to other functions or to store them as an object property. You can also anonymously define a function and assign it to a variable. 

```javascript
// Function that takes a function as a parameter
function doMath(operation, a, b) {
  return operation(a, b);
}

// Anonymous function assigned to a variable
const add = function (a, b) {
  return a + b;
};

console.log(doMath(add, 5, 3));
// OUTPUT: 8

// Anonymous function passed directly as a parameter
console.log(
  doMath(
    function (a, b) {
      return a - b;
    },
    5,
    3
  )
);
// OUTPUT: 2

// Explanation:
// 1. `doMath(operation, a, b)` takes a function (`operation`) as the first parameter and two numbers (`a` and `b`).
//    It calls `operation(a, b)` and returns the result.
//
// 2. In the first example, the `add` function is defined as an anonymous function and then passed as the first parameter 
//    to `doMath`, where it adds the two numbers (5 + 3).
//    The result is 8.
//
// 3. In the second example, an anonymous function is passed directly to `doMath` as a parameter, 
//    where it subtracts the two numbers (5 - 3).
//    The result is 2.
```


- Here's some examples of assigning functions to variabless, as well as using functions as parameters and return values

```javascript
// Anonymous declaration of the function that is later assigned to a variable
const add = function (a, b) {
  return a + b;
};

// Function that logs as a side effect of its execution
function labeler(label, value) {
  console.log(label + '=' + value);
}

// Function that takes a function as a parameter and then executes the function as a side effect
function addAndLabel(labeler, label, adder, a, b) {
  labeler(label, adder(a, b));
}

// Passing a function to a function
addAndLabel(labeler, 'a+b', add, 1, 3);
// OUTPUT: a+b=4

// Function that returns a function
function labelMaker(label) {
  return function (value) {
    console.log(label + '=' + value);
  };
}

// Assign a function from the return value of the function
const nameLabeler = labelMaker('name');

// Calling the returned function
nameLabeler('value');
// OUTPUT: name=value
```

- Inner functions are called inside of other functions. This allows you to modularize your code without always exposing private details:

```javascript
function labeler(value) {
  function stringLabeler(value) {
    console.log('string=' + value);
  }
  function numberLabeler(value) {
    console.log('number=' + value);
  }

  if (typeof value == 'string') {
    stringLabeler(value);
  } else if (typeof value == 'number') {
    numberLabeler(value);
  }
}

labeler(5);
// OUTPUT: number=5

labeler('fish');
// OUTPUT: string=fish
```
## Javascript Arrow Functions

- Because functions are first order objects in JS, they can be declared anywhere and passed as parameters. This results in code with lots of anonymous functions cluttering thins up. To make code more compact, the arrow syntax was created. This replaces the need for the function keyword with the symbols "=>" placed right after the parameter declaration. This is a function that takes no parameters and always returns 3:

- () => 3;

The follwoing shows two sort functions are equivalent. You need add this compare function to sort to specify that we are sorting numbers, not strings:


```javascript
const a = [1, 2, 3, 4];

// standard function syntax
a.sort(function (v1, v2) {
  return v1 - v2;
});

// arrow function syntax
a.sort((v1, v2) => v1 - v2);

```javascript
const a = [1, 2, 3, 4];

// standard function syntax
a.sort(function (v1, v2) {
  return v1 - v2;
});

// arrow function syntax
a.sort((v1, v2) => v1 - v2);
```

- Besides being compact, the arrow function syntax has some more important semantic differences from the standard syntax. This includes restrictions that arrow functions cannot be used for constructions or iterator generators

- Regular constructor:

```javascript
// Regular constructor function
function Person(name) {
  this.name = name;   // 'this' refers to the new object being created
}

// Creating an instance of the Person object using the 'new' keyword
const john = new Person('John');
console.log(john.name);  // OUTPUT: John
```

- Incorrect constructor with arrow function (you can't do this)

```javascript
const Person = (name) => {
  this.name = name;
}

const john = new Person('John');  // ERROR: Person is not a constructor
```

- Arrow functions also have special rules for the return keyword. The return keyword is optional if no curly braces are provided for the function and it contains a single expression. In that case, the result of the expression is automaticallly returned. If curly braces are provieded then the arrow function behaves just like a standard function.

```javascript
() => 3;
// RETURNS: 3

() => {
  3;
};
// RETURNS: undefined

() => {
  return 3;
};
// RETURNS: 3
```

- Arrow functions inherit the "this" pointer from the scope in which they are created. This makes what is known as a "closure". A closure allows a function to continue referencing its creation scope, even after it has passed out of that scope. 

- The function makeClosure returns an anonymous function using the arrow syntax. Notice that the a parameter isi overridden, a new b variable is created, and both a and b are referenced in the arrow function. Because of that reference, they are both part of teh closure for the returned function:

```javascript
function makeClosure(a) {
  a = 'a2';  // Inside this function, 'a' is changed to 'a2'
  const b = 'b2';  // A local constant 'b' is created
  return () => [a, b];  // The arrow function "closes over" 'a' and 'b'
}

const a = 'a';  // This is the global 'a'
const b = 'b';  // This is the global 'b'

const closure = makeClosure(a);  // 'a' in makeClosure is changed to 'a2'

console.log(closure());  // OUTPUT: ['a2', 'b2']
// The closure retains the modified 'a' ('a2') and the locally created 'b' ('b2').

console.log(a, b);  // OUTPUT: 'a', 'b'
// The global 'a' and 'b' remain unchanged.
```

- When you declare a variable using const, the value cannot be reassigned within the same scope. However, you can still modify the properties of objects or reassign function parameters within a function.

- Closures provide a valuable property wehn we execute JS within the scope af an HTML page because it can remember the values of variables when the function was created instead of what they are when they are executed

- Debounce functions execute a specified function once within a given time window. Any requests to execute the debounce funtion more frequently than this will cause the time window to reset. This is important in cases where a user can trigger expensive events thousands of times per second. Without a debounce, the performance of your app can suffer. 

- The following code calls the browser's window.addEventListener function to add a callback function that is invoked whenever the user scrolss the web page. The first parameter to addEventListener specifies that it wants to listen for scroll events. The second parameter provides the function to call when a scroll event happens. In this case, we call a function named debounce. It takes 2 parameters (the time window for executing the window function and the window function to call within that time limit). In this case, we'll exectue the arrow function eveery 500 milliseconds:

```javascript
window.addEventListener(
  'scroll',
  debounce(500, () => {
    console.log('Executed an expensive calculation');
  })
);
```
 - The debounce function immplements the execution of windowFunc within the restricted time window by creating a closure that contains the current timeout and returning a function that will reset the timeout every time it is called. The returned function is what the scroll event will actually call when the sure scrolls the page. However, instead of directly executing the windowFunc, it sets a timer based on the value of windowMs. If the debounce function is called again before the window tiems out then it resets the timeout. The timeout variable essentially captures the closure of each time the timer runs

 ```javascript
function debounce(windowMs, windowFunc) {
  let timeout;
  return function () {
    console.log('scroll event');
    clearTimeout(timeout);
    timeout = setTimeout(() => windowFunc(), windowMs);
  };
}
```

## Arrays

- JS array objects represent a sequence of other objects and primitives. You can reference the members of the array using zero based indexing. You can create an array constructor using the array literal notation below:

```
const a = [1, 2, 3];
console.log(a[1]);
// OUTPUT: 2

console.log(a.length);
// OUTPUT: 3
```

- Here are some static functions for arrays: 

| Function  | Meaning                                              | Example                                |
|-----------|------------------------------------------------------|----------------------------------------|
| push      | Add an item to the end of the array                  | a.push(4)                              |
| pop       | Remove an item from the end of the array             | x = a.pop()                            |
| slice     | Return a sub-array                                   | a.slice(1,-1)                          |
| sort      | Run a function to sort an array in place             | a.sort((a,b) => b-a)                   |
| values    | Creates an iterator for use with a for of loop       | for (i of a.values()) {...}            |
| find      | Find the first item satisfied by a test function     | a.find(i => i < 2)                     |
| forEach   | Run a function on each array item                    | a.forEach(console.log)                 |
| reduce    | Run a function to reduce each array item to a single item | a.reduce((a, c) => a + c)         |
| map       | Run a function to map an array to a new array        | a.map(i => i+i)                        |
| filter    | Run a function to remove items                       | a.filter(i => i%2)                     |
| every     | Run a function to test if all items match            | a.every(i => i < 3)                    |
| some      | Run a function to test if any items match            | a.some(i => i < 1)                     |


```
const a = [1, 2, 3];

console.log(a.map((i) => i + i));
// OUTPUT: [2,4,6]
console.log(a.reduce((v1, v2) => v1 + v2));
// OUTPUT: 6
console.log(a.sort((v1, v2) => v2 - v1));
// OUTPUT: [3,2,1]

a.push(4);
console.log(a.length);
// OUTPUT: 4
```

## JSON

- Javascript Object Notation (JSON) was conceived by Douglas Crockford in 2001. It provides a simple, effective way to share and store data. By design it it easily convertible to and from Javascript objects. This makes it convenient when working with web technologies. 

- JSON docs contain one of the follwing data types:

| Type    | Example                         |
|---------|---------------------------------|
| string  | "crockford"                     |
| number  | 42                              |
| boolean | true                            |
| array   | [null, 42, "crockford"]         |
| object  | {"a":1, "b":"crockford"}        |
| null    | null                            |

-  Most commonly, a JSON doc conatins an object. Objects contain zero or more key value pairs. The key is always a string, and the value must be one of teh valid JSON data types. Key value pairs are delimited with commas. Curly braces delmit an object, square brackest and commas delimit arrays, and strings are always delimted with double quotes. Here's and example:

```
{
  "class": {
    "title": "web programming",
    "description": "Amazing"
  },
  "enrollment": ["Marco", "Jana", "ÙÙŽØ§Ø·ÙÙ…ÙŽØ©"],
  "start": "2025-02-01",
  "end": null
}
```

- JSON is always encoded with UTF-8. This allows for the representation of global data.

- You can convert JSON to and from Javascript using the JSON.parse (back to JS) and JSON.stringify (Create JSON) functions:

```
const obj = { a: 2, b: 'crockford', c: undefined };
const json = JSON.stringify(obj);
const objFromJson = JSON.parse(json);

console.log(obj, json, objFromJson);

// OUTPUT:
// {a: 2, b: 'crockford', c: undefined}
// {"a":2, "b":"crockford"}
// {a: 2, b: 'crockford'}
```

- Note that in this example, JSON can't represent the JS undefined object andd so it gets dropped when converting from JS to JSON. It also would drop functions and symbols

## Javascript Object and Classes

- A JS object represents a collection of name value pairs referred to as properties. The property name must be of type string or symbol, but the value can be of any type. Objects also have common obect-oriented functionality such as constructors, a this pointer, static propterties and functions and inheritance.

- Objects can be created with the "new" operator. This causes the object's constructor to be called. Once declared  you can add properties to the object by simply referencing the property name in an assignment. Any type of variable can be assigned to a property. This includes a sub-object, array, or funciton. The properties of an object can be referenced either with do(obj.prop) or bracket notation(obj['prop']). 

```
const obj = new Object({ a: 3 });
obj['b'] = 'fish';
obj.c = [1, 2, 3];
obj.hello = function () {
  console.log('hello');
};

console.log(obj);
// OUTPUT: {a: 3, b: 'fish', c: [1,2,3], hello: func}
```

- The ability to dynamically modify and object is useful with an indeterminate structure

- Object can refer to the standard JS objects (Promises, map, object, function, date) or to the JS Object (new Object()) or it can refer to any JS object you create

- You can also declare a variable of object type with the "object-literal" syntax. This syntax allows you to provide the initial composition of the object:

```
const obj = {
  a: 3,
  b: 'fish',
};
```

- Object has several interesting functions that are associated with it. They are static:

| Function | Meaning                              |
|----------|--------------------------------------|
| entries  | Returns an array of key-value pairs  |
| keys     | Returns an array of keys             |
| values   | Returns an array of values           |

```
const obj = {
  a: 3,
  b: 'fish',
};

console.log(Object.entries(obj));
// OUTPUT: [['a', 3], ['b', 'fish']]
console.log(Object.keys(obj));
// OUTPUT: ['a', 'b']
console.log(Object.values(obj));
// OUTPUT: [3, 'fish']
```

- Any function that returns an object is considered a "constructor" and can be invoked with the "new" operator:

```
function Person(name) {
  return {
    name: name,
  };
}

const p = new Person('Eich');
console.log(p);
// OUTPUT: {name: 'Eich'}
```

- Because objects can have any type of property value, you can create methods on the object as part of its encapsulation

```
function Person(name) {
  return {
    name: name,
    log: function () {
      console.log('My name is ' + this.name);
    },
  };
}

const p = new Person('Eich');
p.log();
// OUTPUT: My name is Eich
```

- The meaning of "this" depends upon the scope of where it is used, but in an object it refers to a pointer to the object

- You can use classes to define objects. Using a class clarifies the intent to create a reusable container rather than a one off object. Class declarations look similar to declaring an object, but use a construcctor and assumed function declarations. The perons object would look like this as a class:

```
class Person {
  constructor(name) {
    this.name = name;
  }

  log() {
    console.log('My name is ' + this.name);
  }
}

const p = new Person('Eich');
p.log();
// OUTPUT: My name is Eich
```

```
class Person {
  constructor(name) {
    this.name = name;
  }

  log() {
    console.log('My name is ' + this.name);
  }
}

const p = new Person('Eich');
p.log();
// OUTPUT: My name is Eich
```

- You can make properties and functions of classes private by prefixing them with a #:

```
class Person {
  #name;

  constructor(name) {
    this.#name = name;
  }
}

const p = new Person('Eich');
p.#name = 'Lie';
// OUTPUT: Uncaught SyntaxError: Private field '#name' must be declared in an enclosing class
```
- Classes can be extended by using the "extends" keyword to define inheritance. Parameters that need to be passed to the parent class are delivered using the "super" function. Any functions defined on teh child that have the same name as teh parent override the parent's implementation. A parent's function can be accessed by using the "super" keyword:

```
class Person {
  constructor(name) {
    this.name = name;
  }

  print() {
    return 'My name is ' + this.name;
  }
}

class Employee extends Person {
  constructor(name, position) {
    super(name);
    this.position = position;
  }

  print() {
    return super.print() + '. I am a ' + this.position;
  }
}

const e = new Employee('Eich', 'programmer');
console.log(e.print());
// OUTPUT: My name is Eich. I am a programmer
```

## JS Regular Expressions

- Regular expression support is built into JS. You use a regular expression to find text in a string so that you can replace it, or simply to know that it exists.

- You can create a regular expression using the class constructor or a regular literal. Below, the regular expression allows for the character a and then 0 or more occurances of b. i is a flag that states it's not case sensitive. 

```
const objRegex = new RegExp('ab*', 'i');
const literalRegex = /ab*/i;
```

- This string class has several functions that accept regular expressions. These include math, replace, search, and split. FOr a quick test to see if there is a match, you can use the regular expression object's test function. In this one, it looks for the exact string dog, cat or bird. g is a flag that says to find all, i says its case sensitive, m is a multiline flag:

```
const petRegex = /(dog)|(cat)|(bird)/gim;
const text = 'Both cats and dogs are pets, but not rocks.';

text.match(petRegex);
// RETURNS: ['cat', 'dog']

text.replace(petRegex, 'animal');
// RETURNS: Both animals and animals are pets, but not rocks.

petRegex.test(text);
// RETURNS: true
```

| Character | Meaning                                                                                   | Example                                                   |
|-----------|--------------------------------------------------------------------------------------------|-----------------------------------------------------------|
| .         | Matches any single character except newline (\n, \r).                                       | /a.b/ matches "aab", "a9b", but not "ab".                 |
| ^         | Matches the beginning of the input.                                                         | /^a/ matches "a" in "apple", but not in "banana".          |
| $         | Matches the end of the input.                                                               | /a$/ matches "a" in "banana", but not in "apple".          |
| *         | Matches 0 or more of the preceding character.                                               | /a*/ matches "aaa", "a", or an empty string.               |
| +         | Matches 1 or more of the preceding character.                                               | /a+/ matches "aaa" and "a", but not an empty string.       |
| ?         | Matches 0 or 1 of the preceding character.                                                  | /a?/ matches "a" and an empty string.                      |
| \d        | Matches any digit (0-9).                                                                    | /\d/ matches "2" in "B2".                                  |
| \D        | Matches any non-digit.                                                                      | /\D/ matches "B" in "B2".                                  |
| \w        | Matches any word character (alphanumeric or underscore).                                    | /\w/ matches "a" in "apple".                               |
| \W        | Matches any non-word character.                                                             | /\W/ matches " " (space) in "hello world".                 |
| \s        | Matches any whitespace character (spaces, tabs, line breaks).                               | /\s/ matches spaces in "foo bar".                          |
| \S        | Matches any non-whitespace character.                                                       | /\S/ matches "f" in "foo".                                 |
| \b        | Matches a word boundary (position between a word and non-word character).                   | /\bcat\b/ matches "cat" in "The cat sat".                  |
| \B        | Matches a non-word boundary.                                                                | /\Bcat/ matches "cat" in "scat".                           |
| [abc]     | Character class: Matches any one of the enclosed characters (e.g., "a", "b", or "c").       | /[abc]/ matches "a" in "apple" and "b" in "banana".        |
| [^abc]    | Negated character class: Matches any character not enclosed in the brackets.                | /[^abc]/ matches "d" in "dog".                             |
| (a\|b)    | Alternation: Matches either "a" or "b".                                                     |                                                          |
| {n,m}     | Matches between n and m occurrences of the preceding character.                             | /a{2,3}/ matches "aa" and "aaa", but not "a".              |
| \         | Escape character: Treats the next character literally or gives it special meaning.          | /\./ matches a literal period ".".                         |


| Flag | Meaning                                                                                     | Example                                                              |
|------|----------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
| g    | Global search: Finds all matches, not just the first.                                         | /dog/g matches all occurrences of "dog".                             |
| i    | Case-insensitive search: Matches letters in both upper and lower case.                        | /dog/i matches "Dog", "DOG", or "dog".                               |
| m    | Multiline search: ^ and $ match the start and end of each line (instead of the whole input).  | /^foo/m matches "foo" at the beginning of each line.                 |
| s    | Dotall mode: . matches newline characters as well.                                            | /a.b/s matches "a\nb".                                               |
| u    | Unicode: Treats the pattern as a sequence of Unicode code points.                             | /\u{61}/u matches the Unicode character "a".                         |
| y    | Sticky: Matches from the last index position, even if global flag is used.                    | /foo/y tries to match exactly at the current lastIndex position.      |

## Javascript Exceptions

- Javascript exceptions  use "try", "catch", and "throw". An exception is triggered whenever your code generates and exception using the throw keyword or whenever an exception is generated by the JS runtime. 

- To catch a thrown exception, you wrap a code block with the "try" keyword, and follow the try block with a "catch" block. If within the try block, including any functions that block calls, an exception is thrown, then all of the code after the throw is ignored, the call stack is unwond and the catch block is called. 

- In addition to a catch block, you can specify a "finally" block that its always called whenever the "try" block  is exited regardless if an exception was ever thrown. 

- This is the basic syntax:

```
try {
  // normal execution code
} catch (err) {
  // exception handling code
} finally {
  // always called code
}
```

```
function connectDatabase() {
  throw new Error('connection error');
}

try {
  connectDatabase();
  console.log('never executed');
} catch (err) {
  console.log(err);
} finally {
  console.log('always executed');
}

// OUTPUT: Error: connection error
//         always executed
```

- When first using the exception handling, it is tempting to use it as a way to handle normal flows of execution. For example, throwing "file not found" when it is common for users to request nonexistent files. It should only happne when something truly exceptional occurs. This makes your code3 easiere to debug

- The fallback pattern is commonly implemented using exception handling. To implement the fallback pattern you put the normal feature path in a try block and then provide a fallback implementation in the catch block. For example, normally you would get the high scores for a gameby makking a network request, but if the network isn't available then a locally cached version of the last available scores is used. By providing a fallback, you can always return something. 

```
function getScores() {
  try {
    const scores = scoringService.getScores();
    // store the scores so that we can use them later if the network is not available
    window.localStorage.setItem('scores', scores);
    return scores;
  } catch {
    return window.localStorage.getItem('scores');
  }
}
```

## Rest and Spread

- Sometimes you want a function to take an unkown number of parameters. For example if you wanted to write a function that checks to see if some number in a list is equal to a given number, you could write this using an array:

```
function hasNumber(test, numbers) {
  return numbers.some((i) => i === test);
}

const a = [1, 2, 3];
hasNumber(2, a);
// RETURNS: true
```
- However, sometimes you don't have an array to work with. In this case, you could create one on the fly:

```
function hasTwo(a, b, c) {
  return hasNumber(2, [a, b, c]);
}
```
- But JS provides the "rest" syntax to make this easier. Think of it as a parameter that contains the "rest" of the parameters. To turn the last parameter of any function into a "rest" parameter you prefix it will three periods. You can then call it with any number of parameters and they automatically combine into an array:

```
function hasNumber(test, ...numbers) {
  return numbers.some((i) => i === test);
}

hasNumber(2, 1, 2, 3);
// RETURNS: true
```

- Note that you can only make the last parameter a "rest" parameter. Otherwise JS would not knonw which parameters to combine into the array. This is technically known as a variadic function

- Spread does the opposite of rest. It takes an object that is iterable (array or string) and expands it into a function's parameters:

## Destructuring

- Destructuring is the process of pulling individual items out of an existing one, or removing the structure. You can do this with either arrays or objects. This is helpful when you only care about a few items in the original structure.

- Here's an example:

```
const a = [1, 2, 4, 5];

// destructure the first two items from a, into the new variables b and c
const [b, c] = a;

console.log(b, c);
// OUTPUT: 1,2
```
- Note that even though it looks like you are declaring an array with the syntax on the left side of the expression, it is only specifying that you want to destructure those values out of the array

- you can also do this with rest syntax:

```
const [b, c, ...others] = a;

console.log(b, c, others);
// OUTPUT: 1, 2, [4,5]
```

- This works in a similar manner for object, except with arrays, the assignment of the associated value was assumed by the positions in the two arrays. When destruturing objects, you explicitly specify the properites you want to pull from the source object

```
const o = { a: 1, b: 'animals', c: ['fish', 'cats'] };

const { a, c } = o;

console.log(a, c);
// OUTPUT 1, ['fish', 'cats']
```

- You can also map names to new variables instead of just using the original property names:

```
const o = { a: 1, b: 'animals', c: ['fish', 'cats'] };

const { a: count, b: type } = o;

console.log(count, type);
// OUTPUT 1, animals
```

Default values may also be provided for missing ones:

```
const { a, b = 22 } = {};
const [c = 44] = [];

console.log(a, b, c);
// OUTPUT: undefined, 22, 44
```

- Note that all of the above examples created constant new variables. You can also use destructing to reassign existing variables

```
let a = 22;

[a] = [1, 2, 3];

console.log(a);
// OUTPUT: 1
```



```
const a = [1, 2, 4, 5];

// Destructure the first two items and capture the rest
const [ , , ...newArray] = a;

console.log(newArray);
// OUTPUT: [4, 5]
```

## JS Scope

- Scope is defined as the variables that are visible in the current context of execution. JS has 4 types of scope:

  - 1. Global: visible to all code
  - 2. Module: Visible to all code running in a module
  - 3. Function: Visible within a function
  - 4. Block: Visible within a block of code delimited by curly braces

- Initially, JS used the "var" keyword to declare a variable. The problem with var, unlike "const" or "let", is that it ignores block scope. Variables declared with "var" are always logically hoisted to the top of the function. The follwing code shows the same variable name being used within different enclosing scopes. However, because var ignores block scope for the loop is simply assigning a new value to x rather than declaring a new variable that has the same name:

```
var x = 10;
console.log('start', x);

for (var x = 0; x < 1; x++) {
  console.log('middle', x);
}

console.log('end', x);

// OUTPUT: start 10
//         middle 0
//         end 1
```

- There are few cases where it makes sense to use "var". 

- The keyword "this" is a variable that points to an object that contains the context within the scope of the currently executing line of code. The "this" variable is automatically declared and you can reference it anywhere ina JS program. Because of the value of "this" depends upon the context in which it is referenced, there are three different contexts to which this can refer:

  - 1. Global: When "this" is referenced outside of a function or object, it refers to the "globalThis" object represents the context for runtime environment. For example, when running in a browser, "globalThis" refers to the browser's window object

  - 2. Function: When "this" is referenced in a function it refers to the object that owns the function. That is either an object you defined or "globalThis" if the function is defined outside of an object. Note that when running in JS strict mode, a global function's "this" variable is undefined instead of "globalThis". 

  - 3. Object: When "this" is referenced in an object it refers to the object

```
'use strict';

// global scope
console.log('global:', this);
console.log('globalThis:', globalThis);

// function scope for a global function
function globalFunc() {
  console.log('globalFunctionThis:', this);
}
globalFunc();

// object scope
class ScopeTest {
  constructor() {
    console.log('objectThis:', this);
  }

  // function scope for an object function
  objectFunc() {
    console.log('objectFunctionThis:', this);
  }
}

new ScopeTest().objectFunc();
```

- Running the above code in a browser results in the following:

```
global: Window
globalThis: Window
globalFunctionThis: undefined
objectThis: ScopeTest
objectFunctionThis: ScopeTest
```

- Note that if we weren't in strict mode then "globalFunctionThis" would refer to the window

- A closure is defined as a function and its surrounding state. That means whatever variables are accessible when a function is created are available inside that function. This holds true even if you pass the function outside of the scope of its original creation. Here's an example of a function that is created as part of an object. that means that function has access to the object's "this" pointer. 

```
globalThis.x = 'global';

const obj = {
  x: 'object',
  f: function () {
    console.log(this.x);
  },
};

obj.f();
// OUTPUT: object
```

- Arrow functions are a bit different because they inherit the "this" pointer of their creation context. So if we change our previous example to return an arrow function, then the "this" pointer at the time of creation will be globalThis:

```
globalThis.x = 'global';

const obj = {
  x: 'object',
  f: () => console.log(this.x),
};

obj.f();
// OUTPUT: global
```

- However, if we make a function in our objet that returns an arrow function, then the "this" pointer will be the object's "this" pointer since that was the active context at the time the arrow function was created:

```
globalThis.x = 'global';

const obj = {
  x: 'object',
  make: function () {
    return () => console.log(this.x);
  },
};

const f = obj.make();
f();
// OUTPUT: object
```

## JS Modules

- JS modules allow for partitioning and sharing of code. Initially JS had no support for modules. Node.js, a server side JS execution app, introduced the concept of modules in order to support the importing of packages of JS from third party providers. 

- JS got full module support with ES6, and they have become the standard module representation as browser support for ES modules is now almost universal.

- In order to differentiate between the two implementations, Node.js modules are called CommonJS modules, and JS modules are called ES modules.

- Because modules create a file-based scope for the code they represent, you must explicitly "export" the objects from one file and then "import" them into another file. Here's an example module that exports a function that displays an alert:

```
export function alertDisplay(msg) {
  alert(msg);
}
```

- You can import the module's exported function into another module using the "import" keyword

```
import { alertDisplay } from './alert.js';

alertDisplay('called from main.js');
```

- When you use ES modules in the browser via HTML script references, things get a little complicated. The key thing to understand is that modules can only be called from other modules. You can't access JS contained in a module from the global scope that your non-module JS is executing in.

- From your HTML, you can specify that you are using an ES module by including a "type" attribute with the value of "module" in the "script" element. You can then import and use other modules. This is show here:

```
<script type="module">
  import { alertDisplay } from './alert.js';
  alertDisplay('module loaded');
</script> 
```

- If we want to use a module in the global scope that our HTML or other non-module JS is executing in, then we must leak it into the global scope. We do this by either attaching an event handler or explicitly adding a function to the global window object. In the example below:

```
<html>
  <body>
    <script type="module">
      import { alertDisplay } from './alert.js';
      window.btnClick = alertDisplay;

      document.body.addEventListener('keypress', function (event) {
        alertDisplay('Key pressed');
      });
    </script>
    <button onclick="btnClick('button clicked')">Press me</button>
  </body>
</html>
```

- Now if the button is pushed or a key is pressed our ES module function will be called

- Fortunately, when you use a web framework bundler, discussed in later instruction, to generate your web app distribution code, you usually don't have to worry about differentiating between global scope and ES module scope. The bundler will inject all the necessary syntax to connect your HTML to your modules. Historically, this was done by removing the modules and placing all of the JS in a namespaced global partition. Now that ES Modules are supported on most browsers, the bundler will expose the ES module directly. 

## Document Object Model

-  The Document Object Model (DOM) is an object representation of the HTML elements that the browser uses to render the display. The browser also exposes the DOM to external code so that you can write programs that dynamically manipulate the HTML.

- The browser provides access to the DOM through a global variable name "document" that points to the root element of the DOM. If you open the browser's debugger console window and type the variable name "document" you will see the DOM for the document the browser is currently rendering:

```
> document

<html lang="en">
  <body>
    <p>text1 <span>text2</span></p>
    <p>text3</p>
  </body>
</html>
```

```

p {
  color: red;
}
```

- For everything in an HTML doc there is a node in the DOM. This includes elements, attributes, text, comments, and whitespace. All of these nodes form a big tree, with the doc node at the top.

![DOM Image](https://raw.githubusercontent.com/webprogramming260/.github/main/profile/javascript/dom/dom.jpg)

- Every element in an HTML doc implements the DOM Element interface, which is derived from the DOM Node interface. The DOM Element Interface provides the means for iterating child elements, accessing the parent element, and manipulating the element's attributes. From your JS code, you can start with the "document" variable and walk through every element in the tree:

```
function displayElement(el) {
  console.log(el.tagName);
  for (const child of el.children) {
    displayElement(child);
  }
}

displayElement(document);
```

- You can provide a CSS selector to the "querySelectorAll" function in order to select elements from the doc. The "textContent" property contains all of the element's text. You can even access a textual representation of an element's HTML content with the "innerHTML" property.

```
const listElements = document.querySelectorAll('p');
for (const el of listElements) {
  console.log(el.textContent);
}
```

- The DOM supports the ability to insert, modify, or delete the elements in the DOM. To create a new element, you first create the element on the DOM doc. You then insert the new element into the DOM tree by appending it to an existing element in the tree:

```
function insertChild(parentSelector, text) {
  const newChild = document.createElement('div');
  newChild.textContent = text;

  const parentElement = document.querySelector(parentSelector);
  parentElement.appendChild(newChild);
}

insertChild('#courses', 'new course');
```

- To delete elements call the "removeChild" function on the parent element:

```
function deleteElement(elementSelector) {
  const el = document.querySelector(elementSelector);
  el.parentElement.removeChild(el);
}

deleteElement('#courses div');
```

- The DOM also allows you to inject entire blocks of HTML into an element. The following code finds the first "div" element in the DOM and replaces all the HTML it contains:

```
const el = document.querySelector('div');
el.innerHTML = '<div class="injected"><b>Hello</b>!</div>';
```

- However, directly injecting HTML as a block of text is a common attack vector for hackers. If an untrusted party can inject JS anywhere in your app then that JS can represent itself as the current user of the app. The attacker can then make requests for sensitive data, monitor activity, and steal credentials. The example below shows how the img element can be used to launch an attack as soon as the page is loaded:

```
<img src="bogus.png" onerror="console.log('All your base are belong to us')" />
```

- If you are injecting HTML, make sure that it cannot be manipulated by a user. Common injection paths include HTML input controls, URL parameters, and HTTP headers. Either sanitize any HTML that contains variables, or simply use DOM manipulation functions instead of using "innerHTML".

- All DOM elements support the ability to attach a funciton that gets called when an event occurs on the element. These functions are called "event listeners". Here is an example of an event listener that gets called when an element gets clicked:

```
const submitDataEl = document.querySelector('#submitData');
submitDataEl.addEventListener('click', function (event) {
  console.log(event.type);
});
```

- There are lots of possible events that you can add a listener to. This includes things like mouse, keyboard, scrolling, animation, video, audio, WebSocket, and clipboard events. Here are some common events:

| Event Category    | Description                |
|-------------------|----------------------------|
| Clipboard         | Cut, copied, pasted         |
| Focus             | An element gets focus       |
| Keyboard          | Keys are pressed            |
| Mouse             | Click events                |
| Text selection    | When text is selected       |

- You can also add event listeners directly in the HTML. FOr example, here is a "onclick" handler that is attached to a button:

```
<button onclick='alert("clicked")'>click me</button>
```

## Local Storage

- The browser's "localStorage" API provides the ability to persistently store and retrieve data on a user's browser across user sessions and HTML page renderings. For example, your frontend JS code could store a user's name on one HTML page, and then retrieve the name later when a different HTML page is loaded. The user's name will also be available in local storage the next time the same browser is used to access the same website. 

- In addition to persisting applicaiton data between page renderings, "localStorage" is also used as a cache for when data cannot be obtained from the server. For example, your frontend JS could store the last high scores obtained from the service, and then display those scores in the future if the service is not available

There are 4 main functions that can be used with localStorage:

| Function            | Meaning                                         |
|---------------------|-------------------------------------------------|
| `setItem(name, value)` | Sets a named item's value into local storage   |
| `getItem(name)`      | Gets a named item's value from local storage    |
| `removeItem(name)`   | Removes a named item from local storage         |
| `clear()`            | Clears all items in local storage               |


- A local storage value must be of type "string", "number", or "boolean". If you want to store a JS object or array, then you must first convert it to a JSON string with "JSON.stringify()" on insertion, and parse it back to JS with "JSON.parse()" when retrieved.

- Once your startup website and run the following code in the browser's dev tools console window:

```
let user = 'Alice';

let myObject = {
  name: 'Bob',
  info: {
    favoriteClass: 'CS 260',
    likesCS: true,
  },
};

let myArray = [1, 'One', true];

localStorage.setItem('user', user);
localStorage.setItem('object', JSON.stringify(myObject));
localStorage.setItem('array', JSON.stringify(myArray));

console.log(localStorage.getItem('user'));
console.log(JSON.parse(localStorage.getItem('object')));
console.log(JSON.parse(localStorage.getItem('array')));
```

- Output:

```
Alice
{name: 'Bob', info: {favoriteClass: 'CS 260', likesCS: true}
[1, 'One', true]}
```

- Notice that you are able to see the round trip journey of the local storage values in the console output. If you want to see what values are currently set for your application, then open the "Application" tab of the dev tools and select "Storage > Local Storage" and then your domain name. With the dev tools you can add, view, update, and delete any local storage values:

![Local Storage DevTools](https://raw.githubusercontent.com/webprogramming260/.github/main/profile/javascript/localStorage/localStorageDevTools.png)


## Promises

- The rendering process of your HTML executes on a single thread. That means that you cannot take a long time processing JS on the main rendering thread. Long running, or blocking tasks, should be executed with the use of a JS promise. The execution of a promise allows the main rendering thread to continue while some action is executed in the background. You create a promise by calling the Promise objet constructor and passing it an executor function that runs the asynchronous operation. Executing asynchronously means that promise constructor may return before the promise executor function runs. The state of the promise execution is always in one of three states:

  - 1. Pending: Currently running asynchronously
  - 2. Fulfilled: Completed successfully
  - 3. Rejected: Failed to complete

- We can demonstrate asynchronous execution by using the standard JS setTimeout function to create a delay in the execution of the code. The setTimeout function takes the number of milliseconds to wait and a function to call after that amount of time has expired. We call the delay function in a for loop in the promise executor and also in a for loop outside the promise so that both code blocks are running in parallel.

```
const delay = (msg, wait) => {
  setTimeout(() => {
    console.log(msg, wait);
  }, 1000 * wait);
};

new Promise((resolve, reject) => {
  // Code executing in the promise
  for (let i = 0; i < 3; i++) {
    delay('In promise', i);
  }
});

// Code executing after the promise
for (let i = 0; i < 3; i++) {
  delay('After promise', i);
}

// OUTPUT:
//   In promise 0
//   After promise 0
//   In promise 1
//   After promise 1
//   In promise 2
//   After promise 2
```

- Now that we know how to use a promise to execute asynchronously, we need to be able to set the state to "fulfilled" when things complete correctly, or to "rejected" when an error happens. The promise executor function takes two functions as parameters, "resolve" and "reject". Calling "resolve" sets the promise to the "rejected" state.

- Consider the following "coin toss" promise that waits ten seconds and then has a fifty percent chance of resolving or rejecting:

```
const coinToss = new Promise((resolve, reject) => {
  setTimeout(() => {
    if (Math.random() > 0.5) {
      resolve('success');
    } else {
      reject('error');
    }
  }, 10000);
});
```

- If you log the coinToss promise object to the console immediately after calling the constructor, it will display that it is in the "pending" state:

```
console.log(coinToss);
// OUTPUT: Promise {<pending>}
```

- If you wait ten seconds and then log the coinToss promise object again, the state will either show as "fulfilled" or "rejected" depending upon the way the coin landed:

```
console.log(coinToss);
// OUTPUT: Promise {<fulfilled>}
```

- With the ability to asynchronously execute and set the resulting state, we now need a way to generically do something with the result of a promise after it resolves. This is done with functionality similar to exception handling. The promise object has three functions: "then", "catch", and "finally". The "then" function is called if the promise is fulfilled, the "catch" is called if the promise is "rejected", and "finally" is always called after all the processing is completed.

- We can rework our coinToss example and make it so 10 percent of the time the coin falls off the table and resolves to the rejected state. Otherwise the promise resolves to fulfilled with a result of either "heads" or "tails"

```
const coinToss = new Promise((resolve, reject) => {
  setTimeout(() => {
    if (Math.random() > 0.1) {
      resolve(Math.random() > 0.5 ? 'heads' : 'tails');
    } else {
      reject('fell off table');
    }
  }, 10000);
});
```

We then chain the "then", "catch", and "finally" functions to the coinToss object in order to handle each of the possible results:

```
coinToss
  .then((result) => console.log(`Coin toss result: ${result}`))
  .catch((err) => console.log(`Error: ${err}`))
  .finally(() => console.log('Toss completed'));

// OUTPUT:
//    Coin toss result: tails
//    Toss completed
```

## Javascript Async/Await

- JS promise objects are great for asynchronous execution, but as developers began to build large systems with promises they started wanting a more concise representation. This was provided with the introduction of the "async/await" syntax. The "await" keyword wraps the execution of a promise and removed theneed to chain functions. The "await" expression will block until the promise state moves to "fulfilled", or throws an exception if the state moves to "rejeted". For example, if we have a function that returns a coin toss promise:

```
const coinToss = () => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      if (Math.random() > 0.1) {
        resolve(Math.random() > 0.5 ? 'heads' : 'tails');
      } else {
        reject('fell off table');
      }
    }, 1000);
  });
};
```
- We can create equivalent executions with either a promise "then/catch" chain or an "await" with a "try/catch" block. 

- Then/catch chain version:

```
coinToss()
  .then((result) => console.log(`Toss result ${result}`))
  .catch((err) => console.error(`Error: ${err}`))
  .finally(() => console.log(`Toss completed`));
```

- Async, try/catch version:

```
try {
  const result = await coinToss();
  console.log(`Toss result ${result}`);
} catch (err) {
  console.error(`Error: ${err}`);
} finally {
  console.log(`Toss completed`);
}
```

- One  more important restriction for working with "await" is that you can't call await unless it is called at the top level of the JS, or is in a function that is defined with the "async" keyword. Applying the "async" keyword transforms the function so that it returns a promisset hat will resolve to the value that was previously returned by the function. Basically this turns any function into an asynchronous functions, so that it can in turn make asynchronous requests. This is demonstrated with a function that makes animal noises. Notice that the return value is a simple string:

```
function cow() {
  return 'moo';
}
console.log(cow());
// OUTPUT: moo
```

- If we designate the function to be asynchronous then the return value becomes a promise that is immediately resolved and has a value that is the return value of the function

```
async function cow() {
  return 'moo';
}
console.log(cow());
// OUTPUT: Promise {<fulfilled>: 'moo'}
```

- We then change the cow function to explicitly create a promise instead of the automatically generated promise that the await keyword generates:

```
async function cow() {
  return new Promise((resolve) => {
    resolve('moo');
  });
}
console.log(cow());
// OUTPUT: Promise {<pending>}
```

- You can see that the promise is in the pending state because the promise's execution function has not yet resolved

- The "async" keyword declares that a function returns a promise. The "await" keyword wraps a call to the "async" function, blocks execution until the promise has resolved, and then returns the result of the promise

- We can demonstrate "await" in action with the cow promise from above. If we log the output from invoking "cow" then we see that the return value is a promise. However, if we prefix the call to the function with the await keyword, execution will stop until the promise has resolved, at which point the result of the promise is returned instead of the actual promise object: 

```
console.log(cow());
// OUTPUT: Promise {<pending>}

console.log(await cow());
// OUTPUT: moo
```

- By combining "async", to define functions that return promises, with "await", to wait on the promise, you can create code that is asynchronous, but still mainatains the flow of the code without explicitly using callbacks

- You can see the benefit for "async/await" clearly by considering a case where multiple promises are required. For example, when calling the "fetch" web API on an endpoint that returns JSON, you would need to resolve two promises. One for the network call, and one for converting the result to JSON. A promise implementation would look like the following:

```
const httpPromise = fetch('https://simon.cs260.click/api/user/me');
const jsonPromise = httpPromise.then((r) => r.json());
jsonPromise.then((j) => console.log(j));
console.log('done');

// OUTPUT: done
// OUTPUT: {email: 'bud@mail.com', authenticated: true}
```

- With async/await, you can clarify the code intent by hiding the promise syntax, and also make the execution block until the promise is resolved

```
const httpResponse = await fetch('https://simon.cs260.click/api/user/me');
const jsonResponse = await httpResponse.json();
console.log(jsonResponse);
console.log('done');

// OUTPUT: {email: 'bud@mail.com', authenticated: true}
// OUTPUT: done
```

## Debugging Javascript

- It is inevitable that your code is going to have problems, or bugs, at some point. That may be while you are orignially authoring it, working on other code that changes assumed dependencies, or while enhancing the code with new functionality. 

- Learning how to quickly discover and resolve bugs will greatly increase your value as a web developer. Additionally, debuggin skills can also be used during the development process. By following a pattern of writing a block of code and then stepping through or debugging the block, you gain confidence that the block is working as desired before moving on to the next block

- One of the simplest ways to debug your JS code is to insert "console.log" functions that output the state of the code as it executes. For example, we can create a simple web app that has an HTML and JS file that demonstrates the difference between "let" and "var". By inserting "console.log" statements into the code, we can see what the value of each variable is as the code executes:

- index.html

```
<body>
  <h1>Debugging</h1>
  <script src="index.js"></script>
</body>
```
- index.js

```
var varCount = 20;
let letCount = 20;

console.log('Initial - var: %d, let: %d', varCount, letCount);

for (var varCount = 1; varCount < 2; varCount++) {
  for (let letCount = 1; letCount < 2; letCount++) {
    console.log('Loop - var: %d, let: %d', varCount, letCount);
  }
}

const h1El = document.querySelector('h1');
h1El.textContent = `Result - var:${varCount}, let:${letCount}`;
console.log('Final - var: %d, let: %d', varCount, letCount);
```

- Take the follwing steps to see the result of console debugging:
  - 1. Create the above files in a test directory named testConsole
  - 2. Open the testConsole directory in VSCode
  - 3. Run index.html using the VSCode Live Server Extension
  - 4. Open the Chrome browser debugger (F12)
  - 5. Select the "Console" tab
  - 6. Refresh the page

- You'll see this:

![JavaScript Debug Console](https://raw.githubusercontent.com/webprogramming260/.github/main/profile/javascript/debuggingJavascript/javascriptDebugConsole.jpg)

- You can use the debugger console window to inspect variables without using the "console.log" function from your code. For example, if you type varCount in the console window it will print out the current value of varCount. You can also execute JS directly in the console window. For example, if you type "varCount = 50" and press "Enter" it will change the current value of varCount:

![JavaScript Debug Console Variables](https://raw.githubusercontent.com/webprogramming260/.github/main/profile/javascript/debuggingJavascript/javascriptDebugConsoleVars.jpg)


- "console.log" debugging is great for times when you just need to quickly see what is going on in your code, but to really understand the code as it executes you want to use the full capabilities of the browser's debugger.

- Using the same setup we used for "console.log" debugging, open up chrome's browser debugger, but this time select the source tab. This will display the source files that comprise the currently rendered content:

![JavaScript Debug Source](https://raw.githubusercontent.com/webprogramming260/.github/main/profile/javascript/debuggingJavascript/javascriptDebugSource.jpg)

- You can either select "index.js" from the source view on the left, or press "command-P" and then select "index.js" from the list that pops up. Then set a breakpoint on line 4 by clicking on the line number on the left of the displayed source code. This makes it so that the execution of code will pause whenever that line is executed. Refreshing the browser window will cause "index.js" to reload and pause on the breakpoint.

![JavaScript Debug Breakpoint](https://raw.githubusercontent.com/webprogramming260/.github/main/profile/javascript/debuggingJavascript/javascriptDebugBreakpoint.jpg)


- With the browser paused in  the debugger you can move your mouse cursor over a variable to see its value, see what variables are in scope, set watches on variables, or use the console to interact with the code.

- This gives you complete control to inspect what the JS code is doing and experiment with possible alternative directions for the code. Take some time to poke around in the debugger. Learning how to exploit its functionality will make you a much better web developer. 

## Node.js

- Node.js was the first successful app for deploying JS outside of a browser. JS can power your entire tech stack as a result. 

- Browsers run JS using a JS interpreter and execution engine. Chrome based browsers use Google's V8 engine. Node.js took the V8 engine and ran it inside of a console app. When you run a JS program in Chrome or Node.js, it is V8 that reads your code and executes it.


- Install Node.js on Mac with this:

- "curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash"
- nvm intall --lts

- Verify it is installed with "node -v" in the terminal

- You can execute a line of JS with Node.js in the terminal with the "-e" parameter:

- node -e "console.log(1+1)"

- However, to do real work you need to execute an entire project composed of dozens or even hundreds of JS files. You can do this by creating a single starting JS file, name something like index.js, that references the code found in the rest of your project. You than execute your code by running "node" with "index.js" as a parameter. For example, with the follwoing JS saved to a file name index.js:

```
function countdown() {
  let i = 0;
  while (i++ < 5) {
    console.log(`Counting ... ${i}`);
  }
}

countdown();
```

- We can execute the JS by passing the file "node" and receive the following result:

```
âžœ  node index.js
Counting ... 1
Counting ... 2
Counting ... 3
Counting ... 4
Counting ... 5
```

- You can also run "node" in intrepretive mode by executing it without any parameters and then typing your JS code directly into the interpreter:

```
âžœ node
Welcome to Node.js v16.15.1.
> 1+1
2
> console.log('hello')
hello
```

- While you could write all of the JS for everything you need, it is always helpful to use preexisting packages of JS for implementing common tasks. To load a package using Node.js, you must take 2 steps. First, install the package locally on your machine using the Node Package Manager (NPM) and then include a "require" statement in your code that references the package name. NPM is automatically installed with Node.js

- NPM knows how to access a massive repository of preexisting packages. You can search for packages on the NPM website. However, before you can start using NPM to install packages you need to intialize your code to use NPM. This is done by creating a directory that will contain your JS and then running "npm init". NPM will step you through a series of quesitons about the project you are creating. You can press the return key for each of the questions if you want to accept the defaults. If you are always giong to accept all of the defaults you can use npm init -y and skip the QandA:

```
âžœ  mkdir npmtest
âžœ  cd npmtest
âžœ  npm init -y
```

- If you list the files in the directory you will notice that it has a file named "package.json". This file contains three main things: 1. Metadat about your projewct such as its name and the default entry JS file, 2. commands (scripts) that you can exectue to do things like run, test, or distribute your code, and 3. packags that this project depends upon. The following shows what your "package.json" looks like currently. It has some default metadata and a simple placeholder script that just runs the echo command when you execute "npm run test" from the console:

```
{
  "name": "npmtest",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "keywords": [],
  "author": "",
  "license": "ISC",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  }
}
```

- With NPM initialized to work with your project, you can now use it to install a node package. As a simple example, we will install a package that know how to tell jokes. This package is called "give-me-a-joke". You can search for it on the NPM website, see how often it is intsalled, examine the source code, and learn about who created it. You installl it using "npm install" followed by the name of the package:

```
âžœ  npm install give-me-a-joke
```

- If you again examine the contents of the  "package.json" file you will see a reference to the newly installed package dependency. If you decide you no longer want a package dependency you can always remove it wiht the "npm uninstall <package name here>" console command

- With the dependency added, the unnecessary metadata removed, the addition of a useful script to run the program, and also adding a desrciption, the "package.json" file should look like this:

```
{
  "name": "npmtest",
  "version": "1.0.0",
  "description": "Simple Node.js demo",
  "main": "index.js",
  "license": "MIT",
  "scripts": {
    "dev": "node index.js"
  },
  "dependencies": {
    "give-me-a-joke": "^0.5.1"
  }
}
```

- Note that when you start installing package dependencies, NPM will create an additional file name "package-lock.json" and a directory named "node_modules" in your project directory. The node_modules directory contains the actual JS files for the package and all of its dependent packages. As you install several packages this directory will get big. You do not want to check this directory into your source control system since it can be big and can be rebuilt using the info contained in the package.json and package-lock.json files. So make sure you include "node_modules" in your .gitignore file

- When you clone your source code from GitHub to a new location, the first thing you should do is run "npm install" in the project directory. This will cause NPM to download all of the previously installed packages and recreate the "node_modules" directory. 

- The "package-lock.json" file tracks the version of the package that you installed. That way if you rebuild your "node_modules" directory you will have the version of the package you initially installed and not the latest available version, which might not work with your code

- With NPM and the joke package installed, you can now use the joke package in a JS file by referencing the package name as a parameter to the "require" function. This is then followed by a call to the joke's object's "getRandomDadJoke" function to actually generate a jok. Create a file named "index.js and past the following into it:

```
const giveMeAJoke = require('give-me-a-joke');
giveMeAJoke.getRandomDadJoke((joke) => {
  console.log(joke);
});
```

- If you run this code using node.js you should get a result like this:

```
âžœ  node index.js
What do you call a fish with no eyes? A fsh.
```

- This may seem like a lot of work but after you do it a few times it feels natural. These are the main steps:

  - 1. Create your project directory
  - 2. Initialize it for use with NPM by running "npm init -y"
  - 3. Make sure ".gitignore" file contains "node_modules"
  - 4. Install any desired packages with "npm install <package name here>"
  - 5. Add "require('<package name here>')" to your apps JS
  - 6. Use the code the package provides in your JS
  - 7. Run your code with "node index.js"

  - You should be aware that Ryan has created a successor to Node.js called Deno. This is more compliant with ECMAscript and has better performance. There are also other competitors, including Bun

  ## Debugging Node.js

  